<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/578220.jpg"><title>《高性能JavaScript》 | Leon Chen</title><meta name="description" content="">
    <link rel="modulepreload" href="/blog-site/assets/app.06e41ebd.js"><link rel="modulepreload" href="/blog-site/assets/《高性能JavaScript》.html.00b49150.js"><link rel="modulepreload" href="/blog-site/assets/《高性能JavaScript》.html.ce67d464.js"><link rel="modulepreload" href="/blog-site/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/blog-site/assets/style.5c2fd74e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog-site/" class=""><img class="logo" src="/blog-site/images/578220.jpg" alt="Leon Chen"><span class="site-name can-hide">Leon Chen</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog-site/program" class="router-link-active" aria-label="编程"><!--[--><!--]--> 编程 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/promote" class="" aria-label="课外提升"><!--[--><!--]--> 课外提升 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/questions" class="" aria-label="疑问清单"><!--[--><!--]--> 疑问清单 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog-site/program" class="router-link-active" aria-label="编程"><!--[--><!--]--> 编程 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/promote" class="" aria-label="课外提升"><!--[--><!--]--> 课外提升 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/questions" class="" aria-label="疑问清单"><!--[--><!--]--> 疑问清单 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">《高性能JavaScript》 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第1章-加载和执行" class="router-link-active router-link-exact-active sidebar-item" aria-label="第1章 加载和执行"><!--[--><!--]--> 第1章 加载和执行 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#脚本位置" class="router-link-active router-link-exact-active sidebar-item" aria-label="脚本位置"><!--[--><!--]--> 脚本位置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#组织脚本" class="router-link-active router-link-exact-active sidebar-item" aria-label="组织脚本"><!--[--><!--]--> 组织脚本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#延迟的脚本" class="router-link-active router-link-exact-active sidebar-item" aria-label="延迟的脚本"><!--[--><!--]--> 延迟的脚本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#动态脚本元素" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态脚本元素"><!--[--><!--]--> 动态脚本元素 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#xmlhttprequest脚本注入" class="router-link-active router-link-exact-active sidebar-item" aria-label="XMLHttpRequest脚本注入"><!--[--><!--]--> XMLHttpRequest脚本注入 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#推荐的无阻塞模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="推荐的无阻塞模式"><!--[--><!--]--> 推荐的无阻塞模式 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第2章-数据存取" class="router-link-active router-link-exact-active sidebar-item" aria-label="第2章 数据存取"><!--[--><!--]--> 第2章 数据存取 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#作用域链和标识符解析" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域链和标识符解析"><!--[--><!--]--> 作用域链和标识符解析 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#标识符解析的性能" class="router-link-active router-link-exact-active sidebar-item" aria-label="标识符解析的性能"><!--[--><!--]--> 标识符解析的性能 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#动态作用域" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态作用域"><!--[--><!--]--> 动态作用域 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#闭包、作用域和内存" class="router-link-active router-link-exact-active sidebar-item" aria-label="闭包、作用域和内存"><!--[--><!--]--> 闭包、作用域和内存 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#对象成员" class="router-link-active router-link-exact-active sidebar-item" aria-label="对象成员"><!--[--><!--]--> 对象成员 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#原型" class="router-link-active router-link-exact-active sidebar-item" aria-label="原型"><!--[--><!--]--> 原型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#嵌套成员" class="router-link-active router-link-exact-active sidebar-item" aria-label="嵌套成员"><!--[--><!--]--> 嵌套成员 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#缓存对象成员值" class="router-link-active router-link-exact-active sidebar-item" aria-label="缓存对象成员值"><!--[--><!--]--> 缓存对象成员值 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第3章-dom编程" class="router-link-active router-link-exact-active sidebar-item" aria-label="第3章 DOM编程"><!--[--><!--]--> 第3章 DOM编程 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#dom访问与修改" class="router-link-active router-link-exact-active sidebar-item" aria-label="DOM访问与修改"><!--[--><!--]--> DOM访问与修改 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#html集合" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTML集合"><!--[--><!--]--> HTML集合 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#重绘与重排-repaints-and-reflows" class="router-link-active router-link-exact-active sidebar-item" aria-label="重绘与重排（Repaints and Reflows）"><!--[--><!--]--> 重绘与重排（Repaints and Reflows） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#重排何时发生" class="router-link-active router-link-exact-active sidebar-item" aria-label="重排何时发生"><!--[--><!--]--> 重排何时发生 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#渲染树变化的排队与刷新" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染树变化的排队与刷新"><!--[--><!--]--> 渲染树变化的排队与刷新 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#最小化重绘和重排" class="router-link-active router-link-exact-active sidebar-item" aria-label="最小化重绘和重排"><!--[--><!--]--> 最小化重绘和重排 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#事件委托" class="router-link-active router-link-exact-active sidebar-item" aria-label="事件委托"><!--[--><!--]--> 事件委托 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第4章-算法和流程控制" class="router-link-active router-link-exact-active sidebar-item" aria-label="第4章 算法和流程控制"><!--[--><!--]--> 第4章 算法和流程控制 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#条件语句" class="router-link-active router-link-exact-active sidebar-item" aria-label="条件语句"><!--[--><!--]--> 条件语句 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#优化if-else" class="router-link-active router-link-exact-active sidebar-item" aria-label="优化if-else"><!--[--><!--]--> 优化if-else <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#查找表" class="router-link-active router-link-exact-active sidebar-item" aria-label="查找表"><!--[--><!--]--> 查找表 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第5章-字符串和正则表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="第5章 字符串和正则表达式"><!--[--><!--]--> 第5章 字符串和正则表达式 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#正则表达式-回溯" class="router-link-active router-link-exact-active sidebar-item" aria-label="正则表达式（回溯）"><!--[--><!--]--> 正则表达式（回溯） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#更多提高正则表达式效率的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="更多提高正则表达式效率的方法"><!--[--><!--]--> 更多提高正则表达式效率的方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#使用正则表达式去首尾空白" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用正则表达式去首尾空白"><!--[--><!--]--> 使用正则表达式去首尾空白 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#混合解决方案" class="router-link-active router-link-exact-active sidebar-item" aria-label="混合解决方案"><!--[--><!--]--> 混合解决方案 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第6章-快速响应的用户界面" class="router-link-active router-link-exact-active sidebar-item" aria-label="第6章 快速响应的用户界面"><!--[--><!--]--> 第6章 快速响应的用户界面 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#浏览器ui线程" class="router-link-active router-link-exact-active sidebar-item" aria-label="浏览器UI线程"><!--[--><!--]--> 浏览器UI线程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#浏览器限制" class="router-link-active router-link-exact-active sidebar-item" aria-label="浏览器限制"><!--[--><!--]--> 浏览器限制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#多久才算-太久" class="router-link-active router-link-exact-active sidebar-item" aria-label="多久才算“太久”"><!--[--><!--]--> 多久才算“太久” <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#定时器基础" class="router-link-active router-link-exact-active sidebar-item" aria-label="定时器基础"><!--[--><!--]--> 定时器基础 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#使用定时器处理数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用定时器处理数组"><!--[--><!--]--> 使用定时器处理数组 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第7章-ajax" class="router-link-active router-link-exact-active sidebar-item" aria-label="第7章 Ajax"><!--[--><!--]--> 第7章 Ajax <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#数据传输" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据传输"><!--[--><!--]--> 数据传输 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#请求数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求数据"><!--[--><!--]--> 请求数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#发送数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="发送数据"><!--[--><!--]--> 发送数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#数据格式" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据格式"><!--[--><!--]--> 数据格式 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#第8章-编程实践" class="router-link-active router-link-exact-active sidebar-item" aria-label="第8章 编程实践"><!--[--><!--]--> 第8章 编程实践 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#避免双重求值" class="router-link-active router-link-exact-active sidebar-item" aria-label="避免双重求值"><!--[--><!--]--> 避免双重求值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#使用object-array直接量" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用Object/Array直接量"><!--[--><!--]--> 使用Object/Array直接量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#避免重复工作" class="router-link-active router-link-exact-active sidebar-item" aria-label="避免重复工作"><!--[--><!--]--> 避免重复工作 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8A%E9%AB%98%E6%80%A7%E8%83%BDJavaScript%E3%80%8B.html#原生方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="原生方法"><!--[--><!--]--> 原生方法 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="第1章-加载和执行" tabindex="-1"><a class="header-anchor" href="#第1章-加载和执行" aria-hidden="true">#</a> 第1章 加载和执行</h2><p>多数浏览器使用单一进程来处理用户界面（UI）刷新和JavaScript脚本执行。</p><h3 id="脚本位置" tabindex="-1"><a class="header-anchor" href="#脚本位置" aria-hidden="true">#</a> 脚本位置</h3><p>浏览器在解析到<code>&lt;body&gt;</code>标签之前，不会渲染页面的任何部分。</p><p>推荐将所有的<code>&lt;script&gt;</code>标签尽可能放到<code>&lt;body&gt;</code>标签的底部，以尽量减少对整个页面下载的影响。</p><h3 id="组织脚本" tabindex="-1"><a class="header-anchor" href="#组织脚本" aria-hidden="true">#</a> 组织脚本</h3><p>减少页面包含的<code>&lt;script&gt;</code>标签能减少页面阻塞。</p><p>通过把多个文件合并成一个，可以减少性能消耗。</p><h3 id="延迟的脚本" tabindex="-1"><a class="header-anchor" href="#延迟的脚本" aria-hidden="true">#</a> 延迟的脚本</h3><p>使用<code>defer</code>或者<code>async</code>属性异步加载脚本。</p><p>带有<code>defer</code>属性的<code>&lt;script&gt;</code>标签在解析时开始下载，但不会执行，直到DOM加载完成（onload事件之前触发）。</p><h3 id="动态脚本元素" tabindex="-1"><a class="header-anchor" href="#动态脚本元素" aria-hidden="true">#</a> 动态脚本元素</h3><p>可以通过JavaScript动态创建<code>&lt;script&gt;</code>标签并插入，这种技术的优点在于无论在何时启动下载，文件的下载和执行过程不会阻塞页面其他进程。</p><h3 id="xmlhttprequest脚本注入" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest脚本注入" aria-hidden="true">#</a> XMLHttpRequest脚本注入</h3><p>通过请求获取js文件，并通过<code>&lt;script&gt;</code>标签插入到页面中。</p><p>优点是可以自定义推迟脚本的执行，缺点是JavaScript文件必须与所请求的页面处于相同的域。</p><h3 id="推荐的无阻塞模式" tabindex="-1"><a class="header-anchor" href="#推荐的无阻塞模式" aria-hidden="true">#</a> 推荐的无阻塞模式</h3><p>先添加动态加载所需的代码，然后加载初始化页面所需的剩下的代码。</p><blockquote><p>CSS文件是并行下载，不会阻塞页面的其他进程。</p></blockquote><h2 id="第2章-数据存取" tabindex="-1"><a class="header-anchor" href="#第2章-数据存取" aria-hidden="true">#</a> 第2章 数据存取</h2><p>JavaScript有四种基本的数据存取位置：</p><ul><li><p>字面量</p><p>字面量只代表自身，不存储在特定位置。字符串、数字、布尔值、对象、数组、函数、正则表达式，以及特殊的null和undefined值。</p></li><li><p>本地变量</p><p>使用关键字let、const定义的数据存储单元。</p></li><li><p>数组元素</p><p>存储在JavaScript数组对象内部，以数组作为索引。</p></li><li><p>对象成员</p><p>存储在JavaScript对象内部，以字符串作为索引。</p></li></ul><p>使用字面量和局部变量，减少数组和对象成员的使用可以提高运行速度。</p><h3 id="作用域链和标识符解析" tabindex="-1"><a class="header-anchor" href="#作用域链和标识符解析" aria-hidden="true">#</a> 作用域链和标识符解析</h3><p>每一个JavaScript函数都是<code>Function</code>对象的一个实例（箭头函数除外），内部属性<code>[[Scope]]</code>包含了一个函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链。</p><p>执行函数会创建一个执行环境的内部对象，当函数执行完毕，执行环境就被销毁。</p><h3 id="标识符解析的性能" tabindex="-1"><a class="header-anchor" href="#标识符解析的性能" aria-hidden="true">#</a> 标识符解析的性能</h3><p>在执行环境的作用域链中，一个标识符所在的位置越深，它的读写速度也就越慢。</p><p>如果某个跨作用域的值在函数中被引用一次以上，那么就把它存储到局部变量里。</p><h3 id="动态作用域" tabindex="-1"><a class="header-anchor" href="#动态作用域" aria-hidden="true">#</a> 动态作用域</h3><p>动态作用域只存在于代码执行过程中，无法通过静态分析</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">execute</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">code</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">eval</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">code</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">subroutine</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">window</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">w</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">subroutine</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;">execute</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">const window = {}</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="闭包、作用域和内存" tabindex="-1"><a class="header-anchor" href="#闭包、作用域和内存" aria-hidden="true">#</a> 闭包、作用域和内存</h3><p>使用闭包可能会造成内存泄漏，可以通过引入局部变量来减轻闭包对执行速度的影响。</p><h3 id="对象成员" tabindex="-1"><a class="header-anchor" href="#对象成员" aria-hidden="true">#</a> 对象成员</h3><p>对象成员包括属性和方法，当一个被命名的成员引用了一个函数，该成员就被称为一个“方法”，相反，引用了非函数类型的成员就被称为“属性”。</p><h3 id="原型" tabindex="-1"><a class="header-anchor" href="#原型" aria-hidden="true">#</a> 原型</h3><p>访问原型链中的位置越深，找到它也就越慢。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">book</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">title</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">123</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">publisher</span><span style="color:#ECEFF4;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">456</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">book</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">hasOwnProperty</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">title</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#616E88;">// true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">book</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">hasOwnProperty</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">toString</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#616E88;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">title</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">in</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">book</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// true</span></span>
<span class="line"><span style="color:#D8DEE9;">console</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">log</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">toString</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">in</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">book</span><span style="color:#D8DEE9FF;">) </span><span style="color:#616E88;">// true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="嵌套成员" tabindex="-1"><a class="header-anchor" href="#嵌套成员" aria-hidden="true">#</a> 嵌套成员</h3><p>对象成员嵌套得越深，读取速度就会越慢。</p><h3 id="缓存对象成员值" tabindex="-1"><a class="header-anchor" href="#缓存对象成员值" aria-hidden="true">#</a> 缓存对象成员值</h3><p>在函数中如果要多次读取同一个对象属性，最佳做法是将属性值保存到局部变量中。（这种优化技术不推荐用于对象的成员方法，会导致this绑定出问题）。</p><h2 id="第3章-dom编程" tabindex="-1"><a class="header-anchor" href="#第3章-dom编程" aria-hidden="true">#</a> 第3章 DOM编程</h2><h3 id="dom访问与修改" tabindex="-1"><a class="header-anchor" href="#dom访问与修改" aria-hidden="true">#</a> DOM访问与修改</h3><p>访问和修改DOM会导致浏览器重新计算页面的几何变化，造成性能开销。</p><p>推荐写法：减少访问DOM的次数，把运算留给ECMAScript来处理。</p><h3 id="html集合" tabindex="-1"><a class="header-anchor" href="#html集合" aria-hidden="true">#</a> HTML集合</h3><p>HTML集合（类数组）一直与文档保持着连接，每次你需要最新的信息时，都会重复执行查询的过程。</p><p>在相同的内容和数量下，遍历一个数组的速度快于遍历一个HTML集合。</p><p>需要多次访问同一个DOM属性或方法时，最好使用一个局部变量缓存此成员。</p><h3 id="重绘与重排-repaints-and-reflows" tabindex="-1"><a class="header-anchor" href="#重绘与重排-repaints-and-reflows" aria-hidden="true">#</a> 重绘与重排（Repaints and Reflows）</h3><p>浏览器下载完页面中的所有组件之后会解析并生成两个内部数据结构：</p><ul><li><p>DOM树</p><p>表示页面结构</p></li><li><p>渲染树</p><p>表示DOM节点如何显示</p></li></ul><p>DOM树中的每一个需要显示的节点在渲染树中至少存在一个对应的节点（隐藏的DOM元素在渲染树中没有对应的节点）。一旦DOM树和渲染树构建完成，浏览器就开始绘制paint页面元素。</p><p>当DOM的变化影响了元素的几何属性（宽和高）——比如改变边框宽度或给段落增加文字，导致行数增加——浏览器需要重新计算元素的几何属性，同样其他元素的几何属性和位置也会因此受到影响。浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树。这个过程称为“重排（reflow）”。完成重排后，浏览器会出现绘制受影响的部分到屏幕中，这个过程称为“重绘（repaint）”。</p><p>并不是所有的DOM变化都会影响几何属性，例如改变一个元素的背景色不会影响它的宽和高，这种情况下只会发生一次重绘，因为元素的布局并没有改变。</p><p>重绘和重排都是代价昂贵的操作，尽可能减少这类过程的发生。</p><h3 id="重排何时发生" tabindex="-1"><a class="header-anchor" href="#重排何时发生" aria-hidden="true">#</a> 重排何时发生</h3><ul><li>添加或删除可见的DOM元素。</li><li>元素位置改变。</li><li>元素尺寸改变（包括：margin、padding、border、width、height等属性改变）。</li><li>内容改变，例如文本改变或图片被另一个不同尺寸的图片替代。</li><li>页面渲染器初始化。</li><li>浏览器窗口尺寸改变。</li></ul><p>根据改变的范围和程度，渲染树中或大或小对应的部分也需要重新计算，有些改变会触发整个页面的重排。</p><h3 id="渲染树变化的排队与刷新" tabindex="-1"><a class="header-anchor" href="#渲染树变化的排队与刷新" aria-hidden="true">#</a> 渲染树变化的排队与刷新</h3><p>由于每次重排都会产生计算消耗，大多数浏览器通过队列化修改并批量执行来优化重排过程。然而你可能会不知不觉中强制刷新队列并要求计划任务立即执行。获取布局信息的操作会导致队列刷新，比如以下方法：</p><ul><li>offsetTop、offsetLeft、offsetWidth、offsetHeight</li><li>scrollTop、scrollLeft、scrollWidth、scrollHeight</li><li>clientTop、clientLeft、clientWidth、clientHeight</li><li>getComputedStyle()</li></ul><p>以下属性和方法需要返回最新的布局信息，因此浏览器不得不执行渲染队列中的“待处理变化”并触发重排以返回正确的值。</p><h3 id="最小化重绘和重排" tabindex="-1"><a class="header-anchor" href="#最小化重绘和重排" aria-hidden="true">#</a> 最小化重绘和重排</h3><h4 id="改变样式" tabindex="-1"><a class="header-anchor" href="#改变样式" aria-hidden="true">#</a> 改变样式</h4><p>使用<code>cssText</code>合并多次样式的修改</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#D8DEE9;">el</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">style</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">cssText</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">+=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">; border-left: 1px;</span><span style="color:#ECEFF4;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="批量修改dom" tabindex="-1"><a class="header-anchor" href="#批量修改dom" aria-hidden="true">#</a> 批量修改DOM</h4><ol><li>使元素脱离文档流。（重排）</li><li>对其应用多重改变。</li><li>把元素带回文档中。（重排）</li></ol><p>使DOM脱离文档的三个基本方法：</p><ol><li>隐藏元素，应用修改，重新显示。</li><li>使用文档片段（docuement fragment）在当前DOM之外构建一个子树，再把它拷贝回文档。（推荐）</li><li>将原始元素拷贝到一个脱离文档的节点中，修改副本，完成后再替换原始元素。</li></ol><h3 id="事件委托" tabindex="-1"><a class="header-anchor" href="#事件委托" aria-hidden="true">#</a> 事件委托</h3><p>事件绑定占用了处理时间，浏览器需要跟踪每个事件处理器，这也会占用更多的内存。</p><h2 id="第4章-算法和流程控制" tabindex="-1"><a class="header-anchor" href="#第4章-算法和流程控制" aria-hidden="true">#</a> 第4章 算法和流程控制</h2><h3 id="条件语句" tabindex="-1"><a class="header-anchor" href="#条件语句" aria-hidden="true">#</a> 条件语句</h3><p>条件数量越大，越倾向于使用<code>switch</code>而不是<code>if-else</code>。</p><h3 id="优化if-else" tabindex="-1"><a class="header-anchor" href="#优化if-else" aria-hidden="true">#</a> 优化if-else</h3><p><code>if-else</code>中的条件语句应该总是按照从最大概率到最小概率的顺序排列，以确保运行速度最快。</p><p>另一种减少条件判断次数的方法是把<code>if-else</code>组织成一系列嵌套的<code>if-else</code>语句。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">&lt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">6</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">&lt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">3</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">3</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">4</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">&lt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">8</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">6</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">8</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">===</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">9</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="查找表" tabindex="-1"><a class="header-anchor" href="#查找表" aria-hidden="true">#</a> 查找表</h3><p>当有大量离散值需要测试时，可以使用数组和普通对象来构建查找表。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">results</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> [</span><span style="color:#D8DEE9;">result0</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">result1</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">result2</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">result3</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">result4</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">result5</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">result6</span><span style="color:#D8DEE9FF;">]</span></span>
<span class="line"><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">results</span><span style="color:#D8DEE9FF;">[</span><span style="color:#D8DEE9;">value</span><span style="color:#D8DEE9FF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="第5章-字符串和正则表达式" tabindex="-1"><a class="header-anchor" href="#第5章-字符串和正则表达式" aria-hidden="true">#</a> 第5章 字符串和正则表达式</h2><h3 id="正则表达式-回溯" tabindex="-1"><a class="header-anchor" href="#正则表达式-回溯" aria-hidden="true">#</a> 正则表达式（回溯）</h3><p>可以通过把贪婪量词星号<code>(*)</code>替换成惰性（非贪婪）量词<code>*?</code>。</p><h3 id="更多提高正则表达式效率的方法" tabindex="-1"><a class="header-anchor" href="#更多提高正则表达式效率的方法" aria-hidden="true">#</a> 更多提高正则表达式效率的方法</h3><ul><li><p>关注如何让匹配更快失败。</p></li><li><p>正则表达式以简单、必需的字元开始。</p><p>起始标记通常是一个锚（^或$）、特定字符串（x或\u263A）、字符类（[a-z]或类似\d的速记符）和单词边界（\b）。</p></li><li><p>使用量词模式，使他们后面的字元互斥。</p></li><li><p>减少分支数量，缩小分支范围。</p><table><thead><tr><th>替换前</th><th>替换后</th></tr></thead><tbody><tr><td>cat|bat</td><td>[cb]at</td></tr><tr><td>red|read</td><td>rea?d</td></tr><tr><td>red|raw</td><td>r(?:ed|aw)</td></tr><tr><td>(.|\r|\n)</td><td>[\s\S]</td></tr></tbody></table></li><li><p>使用非捕获组。</p></li><li><p>只捕获感兴趣的文本以减少后处理。</p></li><li><p>暴露必需的字元。</p></li><li><p>使用合适的量词。</p></li><li><p>把正则表达式赋值给变量并重用它们。</p></li><li><p>将复杂的正则表达式拆分为简单的片段。</p></li></ul><h3 id="使用正则表达式去首尾空白" tabindex="-1"><a class="header-anchor" href="#使用正则表达式去首尾空白" aria-hidden="true">#</a> 使用正则表达式去首尾空白</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#8FBCBB;">String</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">prototype</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">trim</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">replace</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">^</span><span style="color:#EBCB8B;">\s</span><span style="color:#81A1C1;">+</span><span style="color:#ECEFF4;">/</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&quot;&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">replace</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">/</span><span style="color:#EBCB8B;">\s</span><span style="color:#81A1C1;">+$</span><span style="color:#ECEFF4;">/</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&quot;&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="混合解决方案" tabindex="-1"><a class="header-anchor" href="#混合解决方案" aria-hidden="true">#</a> 混合解决方案</h3><p>使用正则表达式方法过滤头部空白，用非正则表达式的方法过滤尾部字符。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#8FBCBB;">String</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">prototype</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">trim</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">let</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">str</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">this</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">replace</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">^</span><span style="color:#EBCB8B;">\s</span><span style="color:#81A1C1;">+</span><span style="color:#ECEFF4;">/</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&quot;&quot;</span><span style="color:#D8DEE9FF;">)</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">end</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">str</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length </span><span style="color:#81A1C1;">-</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#ECEFF4;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">ws</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#EBCB8B;"> </span><span style="color:#ECEFF4;">/</span><span style="color:#EBCB8B;">\s</span><span style="color:#ECEFF4;">/</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">while</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">ws</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">test</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">str</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">charAt</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">end</span><span style="color:#D8DEE9FF;">))) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#D8DEE9;">end</span><span style="color:#81A1C1;">--;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">return</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">str</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">slice</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">0</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">end</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">+</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="第6章-快速响应的用户界面" tabindex="-1"><a class="header-anchor" href="#第6章-快速响应的用户界面" aria-hidden="true">#</a> 第6章 快速响应的用户界面</h2><h3 id="浏览器ui线程" tabindex="-1"><a class="header-anchor" href="#浏览器ui线程" aria-hidden="true">#</a> 浏览器UI线程</h3><p>用于执行JavaScript和更新用户界面的进程通常被称为“浏览器UI线程”。UI线程的工作基于一个简单的队列系统，任务会被保存到队列中直到进程空闲。一旦空闲，队列中的下一个任务就被重新提取出来并运行。</p><p>大多数浏览器在JavaScript运行时会停止把新任务加入UI线程的队列中。</p><h3 id="浏览器限制" tabindex="-1"><a class="header-anchor" href="#浏览器限制" aria-hidden="true">#</a> 浏览器限制</h3><p>浏览器限制了JavaScript任务的运行时间，这种限制确保某些恶意代码不能通过永不停止的密集操作锁住用户的浏览器或计算机。</p><p>限制分为两种：调用栈大小限制和长时间运行脚本限制。</p><h3 id="多久才算-太久" tabindex="-1"><a class="header-anchor" href="#多久才算-太久" aria-hidden="true">#</a> 多久才算“太久”</h3><p>研究表明，单个JavaScript操作花费的总时间不应该超过100毫秒。</p><h3 id="定时器基础" tabindex="-1"><a class="header-anchor" href="#定时器基础" aria-hidden="true">#</a> 定时器基础</h3><p>定时器代码只有在创建它的函数执行完成之后，才有可能被执行。</p><p>创建一个定时器会造成UI线程暂停，如同它从一个任务切换到下一个任务。因此，定时器代码会重置所有相关的浏览器限制，包括长时间运行脚本定时器，调用栈也在定时器的代码重置为0，这一特性使得定时器称为长时间运行JavaScript代码理想的跨浏览器解决方案。</p><blockquote><p>如果UI队列中已经存在由同一个setInterval()创建的任务，那么后续任务不会被添加到UI队列中。</p></blockquote><h3 id="使用定时器处理数组" tabindex="-1"><a class="header-anchor" href="#使用定时器处理数组" aria-hidden="true">#</a> 使用定时器处理数组</h3><p>是否可以用定时器取代循环的两个决定性因素：</p><ul><li>处理过程是否必须同步？</li><li>数据是否必须按顺序处理？</li></ul><blockquote><p>定时器的延时最好使用至少25毫秒，因为再小的延时，对大多数UI更新来说不够用。</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">processArray</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">items</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">process</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">callback</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">todo</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">items</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">concat</span><span style="color:#D8DEE9FF;">()</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">process</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">todo</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">shift</span><span style="color:#D8DEE9FF;">())</span><span style="color:#81A1C1;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">todo</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9FF;">length </span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">setTimeout</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">arguments</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">callee</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">25</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#88C0D0;">callback</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">items</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">},</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">20</span><span style="color:#D8DEE9FF;">)</span><span style="color:#81A1C1;">;</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="第7章-ajax" tabindex="-1"><a class="header-anchor" href="#第7章-ajax" aria-hidden="true">#</a> 第7章 Ajax</h2><h3 id="数据传输" tabindex="-1"><a class="header-anchor" href="#数据传输" aria-hidden="true">#</a> 数据传输</h3><p>Ajax，是一种与服务器通信而无须重载页面的方法。</p><h3 id="请求数据" tabindex="-1"><a class="header-anchor" href="#请求数据" aria-hidden="true">#</a> 请求数据</h3><ul><li><p>XMLHttpRequest（XHR）</p><p>不支持跨域。支持所有请求方法。</p></li><li><p>Dynamic script tag insertion 动态脚本注入</p><p>支持跨域。不支持POST方法。不支持设置请求头。不能设置请求的超时处理或重试。</p></li><li><p>iframes</p></li><li><p>Comet</p></li><li><p>Multipart XHR</p><p>通过在服务端将资源（CSS文件、HTML片段、JavaScript代码或base64编码的图片）打包成一个由双方约定的字符串分割的长字符串并发送到客户端。</p></li></ul><h3 id="发送数据" tabindex="-1"><a class="header-anchor" href="#发送数据" aria-hidden="true">#</a> 发送数据</h3><ul><li><p>XMLHttpRequest（XHR）</p></li><li><p>信标（beacons）。</p><p>使用img标签。</p></li></ul><h3 id="数据格式" tabindex="-1"><a class="header-anchor" href="#数据格式" aria-hidden="true">#</a> 数据格式</h3><ul><li>XML</li><li>XPath</li><li>JSON</li><li>JSON-P</li></ul><p>JSON是高性能Ajax的基础。</p><h2 id="第8章-编程实践" tabindex="-1"><a class="header-anchor" href="#第8章-编程实践" aria-hidden="true">#</a> 第8章 编程实践</h2><h3 id="避免双重求值" tabindex="-1"><a class="header-anchor" href="#避免双重求值" aria-hidden="true">#</a> 避免双重求值</h3><p>避免使用<code>eval()</code>和<code>Function()</code>。</p><h3 id="使用object-array直接量" tabindex="-1"><a class="header-anchor" href="#使用object-array直接量" aria-hidden="true">#</a> 使用Object/Array直接量</h3><p>避免使用<code>new Object()</code>和<code>new Array()</code>。</p><h3 id="避免重复工作" tabindex="-1"><a class="header-anchor" href="#避免重复工作" aria-hidden="true">#</a> 避免重复工作</h3><p>别做无关紧要的工作，别重复做已经完成的工作。</p><h4 id="延迟加载" tabindex="-1"><a class="header-anchor" href="#延迟加载" aria-hidden="true">#</a> 延迟加载</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">function</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">addHandler</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">eventType</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">handler</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">if</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">addEventListener</span><span style="color:#D8DEE9FF;">) </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#88C0D0;">addHandler</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;">(</span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">eventType</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">handler</span><span style="color:#ECEFF4;">)</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#D8DEE9FF;">      </span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">.</span><span style="color:#88C0D0;">addEventListener</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">eventType</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">handler</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">false</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">    </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">else</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span></span>
<span class="line"><span style="color:#ECEFF4;">    </span><span style="color:#616E88;">// ...</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#ECEFF4;">}</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#88C0D0;">addHandler</span><span style="color:#D8DEE9FF;">(</span><span style="color:#D8DEE9;">target</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">eventType</span><span style="color:#ECEFF4;">,</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">handler</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="条件预加载" tabindex="-1"><a class="header-anchor" href="#条件预加载" aria-hidden="true">#</a> 条件预加载</h4><p>在脚本加载期间提前检测。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">const</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">addHandler</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#D8DEE9;">document</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">body</span><span style="color:#ECEFF4;">.</span><span style="color:#D8DEE9;">addEventListener</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">?</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#81A1C1;">...</span><span style="color:#ECEFF4;">}</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">:</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">function</span><span style="color:#ECEFF4;">()</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">{</span><span style="color:#81A1C1;">...</span><span style="color:#ECEFF4;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="原生方法" tabindex="-1"><a class="header-anchor" href="#原生方法" aria-hidden="true">#</a> 原生方法</h3><p>JavaScript原生方法是通过C++编写的，拥有更好的性能，所以最好尽可能使用原生方法和属性，特别是数学运算和DOM操作。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: czl624824554@163.com">chenzilin</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog-site/assets/app.06e41ebd.js" defer></script>
  </body>
</html>
