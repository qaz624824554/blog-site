<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.36">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/578220.jpg"><title>Leon Chen</title><meta name="description" content="">
    <link rel="modulepreload" href="/blog-site/assets/app.06e41ebd.js"><link rel="modulepreload" href="/blog-site/assets/《SQL必知必会》.html.046d8df8.js"><link rel="modulepreload" href="/blog-site/assets/《SQL必知必会》.html.b8a4e005.js"><link rel="modulepreload" href="/blog-site/assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="/blog-site/assets/style.5c2fd74e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog-site/" class=""><img class="logo" src="/blog-site/images/578220.jpg" alt="Leon Chen"><span class="site-name can-hide">Leon Chen</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog-site/program" class="router-link-active" aria-label="编程"><!--[--><!--]--> 编程 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/promote" class="" aria-label="课外提升"><!--[--><!--]--> 课外提升 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/questions" class="" aria-label="疑问清单"><!--[--><!--]--> 疑问清单 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog-site/program" class="router-link-active" aria-label="编程"><!--[--><!--]--> 编程 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/promote" class="" aria-label="课外提升"><!--[--><!--]--> 课外提升 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog-site/questions" class="" aria-label="疑问清单"><!--[--><!--]--> 疑问清单 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第一章-了解sql" class="router-link-active router-link-exact-active sidebar-item" aria-label="第一章 了解SQL"><!--[--><!--]--> 第一章 了解SQL <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_1-1-数据库基础" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 数据库基础"><!--[--><!--]--> 1.1 数据库基础 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_1-2-什么是sql" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 什么是SQL"><!--[--><!--]--> 1.2 什么是SQL <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第二章-检索数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二章 检索数据"><!--[--><!--]--> 第二章 检索数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-1-select语句" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 SELECT语句"><!--[--><!--]--> 2.1 SELECT语句 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-2-检索单个列" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 检索单个列"><!--[--><!--]--> 2.2 检索单个列 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-3-检索多个列" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 检索多个列"><!--[--><!--]--> 2.3 检索多个列 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-4-检索所有列" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.4 检索所有列"><!--[--><!--]--> 2.4 检索所有列 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-5-检索不同的值" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.5 检索不同的值"><!--[--><!--]--> 2.5 检索不同的值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-6-限制结果" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.6 限制结果"><!--[--><!--]--> 2.6 限制结果 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_2-7-使用注释" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.7 使用注释"><!--[--><!--]--> 2.7 使用注释 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第三章-排序检索数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第三章 排序检索数据"><!--[--><!--]--> 第三章 排序检索数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_3-1-排序数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 排序数据"><!--[--><!--]--> 3.1 排序数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_3-2-按多个列排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 按多个列排序"><!--[--><!--]--> 3.2 按多个列排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_3-3-按列位置排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 按列位置排序"><!--[--><!--]--> 3.3 按列位置排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_3-4-指定排序方向" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 指定排序方向"><!--[--><!--]--> 3.4 指定排序方向 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第四章-过滤数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第四章 过滤数据"><!--[--><!--]--> 第四章 过滤数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_4-1-使用where子句" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.1 使用WHERE子句"><!--[--><!--]--> 4.1 使用WHERE子句 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_4-2-where子句操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.2 WHERE子句操作符"><!--[--><!--]--> 4.2 WHERE子句操作符 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第五章-高级数据过滤" class="router-link-active router-link-exact-active sidebar-item" aria-label="第五章 高级数据过滤"><!--[--><!--]--> 第五章 高级数据过滤 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_5-1-组合where子句" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.1 组合WHERE子句"><!--[--><!--]--> 5.1 组合WHERE子句 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_5-2-in操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.2 IN操作符"><!--[--><!--]--> 5.2 IN操作符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_5-3-not操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="5.3 NOT操作符"><!--[--><!--]--> 5.3 NOT操作符 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第六章-用通配符进行过滤" class="router-link-active router-link-exact-active sidebar-item" aria-label="第六章 用通配符进行过滤"><!--[--><!--]--> 第六章 用通配符进行过滤 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_6-1-like操作符" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1 LIKE操作符"><!--[--><!--]--> 6.1 LIKE操作符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_6-2-使用通配符技巧" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2 使用通配符技巧"><!--[--><!--]--> 6.2 使用通配符技巧 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第七章-创建计算字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="第七章 创建计算字段"><!--[--><!--]--> 第七章 创建计算字段 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_7-1-计算字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.1 计算字段"><!--[--><!--]--> 7.1 计算字段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_7-2-拼接字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2 拼接字段"><!--[--><!--]--> 7.2 拼接字段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_7-3-执行算术运算" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3 执行算术运算"><!--[--><!--]--> 7.3 执行算术运算 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第八章-使用函数处理数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第八章 使用函数处理数据"><!--[--><!--]--> 第八章 使用函数处理数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_8-1-函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.1 函数"><!--[--><!--]--> 8.1 函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_8-2-使用函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.2 使用函数"><!--[--><!--]--> 8.2 使用函数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第九章-汇总数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第九章 汇总数据"><!--[--><!--]--> 第九章 汇总数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_9-1-聚集函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.1 聚集函数"><!--[--><!--]--> 9.1 聚集函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_9-2-聚集不同值" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.2 聚集不同值"><!--[--><!--]--> 9.2 聚集不同值 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_9-3-组合聚集函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="9.3 组合聚集函数"><!--[--><!--]--> 9.3 组合聚集函数 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十章-分组数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十章 分组数据"><!--[--><!--]--> 第十章 分组数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_10-1-数据分组" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.1 数据分组"><!--[--><!--]--> 10.1 数据分组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_10-2-创建分组" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.2 创建分组"><!--[--><!--]--> 10.2 创建分组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_10-3-过滤分组" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.3 过滤分组"><!--[--><!--]--> 10.3 过滤分组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_10-4-分组和排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.4 分组和排序"><!--[--><!--]--> 10.4 分组和排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_10-5-select子句顺序" class="router-link-active router-link-exact-active sidebar-item" aria-label="10.5 SELECT子句顺序"><!--[--><!--]--> 10.5 SELECT子句顺序 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十一章-使用子查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十一章 使用子查询"><!--[--><!--]--> 第十一章 使用子查询 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_11-1-子查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="11.1 子查询"><!--[--><!--]--> 11.1 子查询 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_11-3-作为计算字段使用子查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="11.3 作为计算字段使用子查询"><!--[--><!--]--> 11.3 作为计算字段使用子查询 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十二章-联结表" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十二章 联结表"><!--[--><!--]--> 第十二章 联结表 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_12-1-联结" class="router-link-active router-link-exact-active sidebar-item" aria-label="12.1 联结"><!--[--><!--]--> 12.1 联结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_12-2-创建联结" class="router-link-active router-link-exact-active sidebar-item" aria-label="12.2 创建联结"><!--[--><!--]--> 12.2 创建联结 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十三章-创建高级联结" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十三章 创建高级联结"><!--[--><!--]--> 第十三章 创建高级联结 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_13-1-使用表别名" class="router-link-active router-link-exact-active sidebar-item" aria-label="13.1 使用表别名"><!--[--><!--]--> 13.1 使用表别名 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_13-2-使用不同类型的联结" class="router-link-active router-link-exact-active sidebar-item" aria-label="13.2 使用不同类型的联结"><!--[--><!--]--> 13.2 使用不同类型的联结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_13-3-使用带聚集函数的联结" class="router-link-active router-link-exact-active sidebar-item" aria-label="13.3 使用带聚集函数的联结"><!--[--><!--]--> 13.3 使用带聚集函数的联结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_13-4-使用联结和联结条件" class="router-link-active router-link-exact-active sidebar-item" aria-label="13.4 使用联结和联结条件"><!--[--><!--]--> 13.4 使用联结和联结条件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十四章-组合查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十四章 组合查询"><!--[--><!--]--> 第十四章 组合查询 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_14-1-组合查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="14.1 组合查询"><!--[--><!--]--> 14.1 组合查询 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_14-2-创建组合查询" class="router-link-active router-link-exact-active sidebar-item" aria-label="14.2 创建组合查询"><!--[--><!--]--> 14.2 创建组合查询 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十五章-插入数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十五章 插入数据"><!--[--><!--]--> 第十五章 插入数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_15-1-数据插入" class="router-link-active router-link-exact-active sidebar-item" aria-label="15.1 数据插入"><!--[--><!--]--> 15.1 数据插入 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_15-2-从一个表复制到另一个表" class="router-link-active router-link-exact-active sidebar-item" aria-label="15.2 从一个表复制到另一个表"><!--[--><!--]--> 15.2 从一个表复制到另一个表 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十六章-更新和删除数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十六章 更新和删除数据"><!--[--><!--]--> 第十六章 更新和删除数据 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_16-1-更新数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="16.1 更新数据"><!--[--><!--]--> 16.1 更新数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_16-2-删除数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="16.2 删除数据"><!--[--><!--]--> 16.2 删除数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_16-3-更新和删除的指导原则" class="router-link-active router-link-exact-active sidebar-item" aria-label="16.3 更新和删除的指导原则"><!--[--><!--]--> 16.3 更新和删除的指导原则 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十七章-创建和操作表" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十七章 创建和操作表"><!--[--><!--]--> 第十七章 创建和操作表 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_17-1-创建表" class="router-link-active router-link-exact-active sidebar-item" aria-label="17.1 创建表"><!--[--><!--]--> 17.1 创建表 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_17-2-更新表" class="router-link-active router-link-exact-active sidebar-item" aria-label="17.2 更新表"><!--[--><!--]--> 17.2 更新表 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_17-3-删除表" class="router-link-active router-link-exact-active sidebar-item" aria-label="17.3 删除表"><!--[--><!--]--> 17.3 删除表 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_17-4-重命名表" class="router-link-active router-link-exact-active sidebar-item" aria-label="17.4 重命名表"><!--[--><!--]--> 17.4 重命名表 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十八章-使用视图" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十八章 使用视图"><!--[--><!--]--> 第十八章 使用视图 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_18-1-视图" class="router-link-active router-link-exact-active sidebar-item" aria-label="18.1 视图"><!--[--><!--]--> 18.1 视图 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_18-2-创建视图" class="router-link-active router-link-exact-active sidebar-item" aria-label="18.2 创建视图"><!--[--><!--]--> 18.2 创建视图 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第十九章-使用存储过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="第十九章 使用存储过程"><!--[--><!--]--> 第十九章 使用存储过程 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_19-1-存储过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="19.1 存储过程"><!--[--><!--]--> 19.1 存储过程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_19-4-创建存储过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="19.4 创建存储过程"><!--[--><!--]--> 19.4 创建存储过程 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第二十章-管理事务处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二十章 管理事务处理"><!--[--><!--]--> 第二十章 管理事务处理 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_20-1-事务处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="20.1 事务处理"><!--[--><!--]--> 20.1 事务处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_20-2-控制事务处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="20.2 控制事务处理"><!--[--><!--]--> 20.2 控制事务处理 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第二十一章-使用游标" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二十一章 使用游标"><!--[--><!--]--> 第二十一章 使用游标 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_21-1-游标" class="router-link-active router-link-exact-active sidebar-item" aria-label="21.1 游标"><!--[--><!--]--> 21.1 游标 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_21-2-使用游标" class="router-link-active router-link-exact-active sidebar-item" aria-label="21.2 使用游标"><!--[--><!--]--> 21.2 使用游标 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#第二十二章-高级sql特性" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二十二章 高级SQL特性"><!--[--><!--]--> 第二十二章 高级SQL特性 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_22-1-约束" class="router-link-active router-link-exact-active sidebar-item" aria-label="22.1 约束"><!--[--><!--]--> 22.1 约束 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_22-2-索引" class="router-link-active router-link-exact-active sidebar-item" aria-label="22.2 索引"><!--[--><!--]--> 22.2 索引 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_22-3-触发器" class="router-link-active router-link-exact-active sidebar-item" aria-label="22.3 触发器"><!--[--><!--]--> 22.3 触发器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#_22-4-数据库安全" class="router-link-active router-link-exact-active sidebar-item" aria-label="22.4 数据库安全"><!--[--><!--]--> 22.4 数据库安全 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#附录b-sql语句的语法" class="router-link-active router-link-exact-active sidebar-item" aria-label="附录B SQL语句的语法"><!--[--><!--]--> 附录B SQL语句的语法 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#alter-table" class="router-link-active router-link-exact-active sidebar-item" aria-label="ALTER TABLE"><!--[--><!--]--> ALTER TABLE <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#commit" class="router-link-active router-link-exact-active sidebar-item" aria-label="COMMIT"><!--[--><!--]--> COMMIT <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#create-index" class="router-link-active router-link-exact-active sidebar-item" aria-label="CREATE INDEX"><!--[--><!--]--> CREATE INDEX <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#create-procedure" class="router-link-active router-link-exact-active sidebar-item" aria-label="CREATE PROCEDURE"><!--[--><!--]--> CREATE PROCEDURE <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#create-table" class="router-link-active router-link-exact-active sidebar-item" aria-label="CREATE TABLE"><!--[--><!--]--> CREATE TABLE <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#create-view" class="router-link-active router-link-exact-active sidebar-item" aria-label="CREATE VIEW"><!--[--><!--]--> CREATE VIEW <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#delete" class="router-link-active router-link-exact-active sidebar-item" aria-label="DELETE"><!--[--><!--]--> DELETE <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#drop" class="router-link-active router-link-exact-active sidebar-item" aria-label="DROP"><!--[--><!--]--> DROP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#insert" class="router-link-active router-link-exact-active sidebar-item" aria-label="INSERT"><!--[--><!--]--> INSERT <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#insert-select" class="router-link-active router-link-exact-active sidebar-item" aria-label="INSERT SELECT"><!--[--><!--]--> INSERT SELECT <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#rollback" class="router-link-active router-link-exact-active sidebar-item" aria-label="ROLLBACK"><!--[--><!--]--> ROLLBACK <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#select" class="router-link-active router-link-exact-active sidebar-item" aria-label="SELECT"><!--[--><!--]--> SELECT <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#update" class="router-link-active router-link-exact-active sidebar-item" aria-label="UPDATE"><!--[--><!--]--> UPDATE <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#附录c-sql数据类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="附录C SQL数据类型"><!--[--><!--]--> 附录C SQL数据类型 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#字符串数据类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="字符串数据类型"><!--[--><!--]--> 字符串数据类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#数值数据类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="数值数据类型"><!--[--><!--]--> 数值数据类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#日期和时间数据类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="日期和时间数据类型"><!--[--><!--]--> 日期和时间数据类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog-site/program/%E3%80%8ASQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A%E3%80%8B.html#二进制数据类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="二进制数据类型"><!--[--><!--]--> 二进制数据类型 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="第一章-了解sql" tabindex="-1"><a class="header-anchor" href="#第一章-了解sql" aria-hidden="true">#</a> 第一章 了解SQL</h2><h3 id="_1-1-数据库基础" tabindex="-1"><a class="header-anchor" href="#_1-1-数据库基础" aria-hidden="true">#</a> 1.1 数据库基础</h3><h4 id="数据库" tabindex="-1"><a class="header-anchor" href="#数据库" aria-hidden="true">#</a> 数据库</h4><blockquote><p><strong>数据库（database）</strong></p><p>保存有组织的数据的容器（通常是一个文件或一组文件）。</p><p>数据库软件应称为数据库管理系统（DBMS），数据库是通过DBMS创建和操纵的容器。</p></blockquote><h4 id="表" tabindex="-1"><a class="header-anchor" href="#表" aria-hidden="true">#</a> 表</h4><blockquote><p><strong>表（table）</strong></p><p>某种特定类型数据的结构化清单。</p></blockquote><p>数据库中的每张表的名字都是唯一的。</p><blockquote><p><strong>模式（schema）</strong></p><p>关于数据表和表的布局及特性的信息。</p></blockquote><h4 id="列和数据类型" tabindex="-1"><a class="header-anchor" href="#列和数据类型" aria-hidden="true">#</a> 列和数据类型</h4><blockquote><p><strong>列（column）</strong></p><p>表中的一个字段。所有表都是由一个或多个列组成的。</p></blockquote><blockquote><p><strong>数据类型（datatype）</strong></p><p>允许什么类型的数据。每个表都有相应的数据类型，它限制（或允许）该列中存储的数据。</p><p>数据类型能帮助正确地分类数据，并起到优化磁盘的作用，因此创建表时必须特别关注数据类型。</p></blockquote><h4 id="行" tabindex="-1"><a class="header-anchor" href="#行" aria-hidden="true">#</a> 行</h4><blockquote><p><strong>行（row）</strong></p><p>表中的一个记录</p></blockquote><h4 id="主键" tabindex="-1"><a class="header-anchor" href="#主键" aria-hidden="true">#</a> 主键</h4><blockquote><p><strong>主键（primary key）</strong></p><p>一列（或几列），其值能够唯一标识表中每一行。</p><p>每个表应该都总是定义主键，以便于后续的数据操作和管理。</p></blockquote><p>表中的任何列都可以作为主键，只要满足以下条件：</p><ul><li>任意两行都不具有相同的主键值；</li><li>每一行都必须具有一个主键值（不允许空值NULL）；</li><li>主键列中的值不允许修改或更新；</li><li>主键值不能重用（如果某行从表中删除，它的主键不能赋给以后的新行）。</li></ul><h3 id="_1-2-什么是sql" tabindex="-1"><a class="header-anchor" href="#_1-2-什么是sql" aria-hidden="true">#</a> 1.2 什么是SQL</h3><p>SQL（Structured Query Language）结构化查询语言，SQL是一种专门用来与数据库沟通的语言。</p><p>SQL优点：</p><ul><li>不是某个特定数据库厂商专有的语言，因此学习SQL几乎能与所有数据库打交道。</li><li>简单易学。</li><li>灵活，可以进行复杂和高级的数据库操作。</li></ul><h2 id="第二章-检索数据" tabindex="-1"><a class="header-anchor" href="#第二章-检索数据" aria-hidden="true">#</a> 第二章 检索数据</h2><h3 id="_2-1-select语句" tabindex="-1"><a class="header-anchor" href="#_2-1-select语句" aria-hidden="true">#</a> 2.1 SELECT语句</h3><blockquote><p><strong>关键字（keyword）</strong></p><p>作为SQL组成部分的保留字。关键字不能用作表或列的名字。</p></blockquote><h3 id="_2-2-检索单个列" tabindex="-1"><a class="header-anchor" href="#_2-2-检索单个列" aria-hidden="true">#</a> 2.2 检索单个列</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>多条SQL语句必须以分号（<code>;</code>）分隔。</p><p>SQL语句不区分大小写。</p><p>在 处理SQL语句时，所有空格都被忽略。</p></blockquote><h3 id="_2-3-检索多个列" tabindex="-1"><a class="header-anchor" href="#_2-3-检索多个列" aria-hidden="true">#</a> 2.3 检索多个列</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-4-检索所有列" tabindex="-1"><a class="header-anchor" href="#_2-4-检索所有列" aria-hidden="true">#</a> 2.4 检索所有列</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意：使用通配符</p><p>除非确实需要表中的每一列，否则最好别使用*通配符，检索不需要的列通常会降低检索速度和应用程序的性能。</p></blockquote><h3 id="_2-5-检索不同的值" tabindex="-1"><a class="header-anchor" href="#_2-5-检索不同的值" aria-hidden="true">#</a> 2.5 检索不同的值</h3><p>使用<code>DISTINCT</code>关键字指示数据库只返回不同的值。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT DISTINCT</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意：不能部分使用DISTINCT</p><p>DISTINCT关键字会作用于所有的列。</p></blockquote><h3 id="_2-6-限制结果" tabindex="-1"><a class="header-anchor" href="#_2-6-限制结果" aria-hidden="true">#</a> 2.6 限制结果</h3><p>不同的DBMS有不同的关键字，Mysql使用<code>LIMIT</code>关键字。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">LIMIT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">5</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>OFFSET</code>关键字指示从第几行开始返回数据。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">LIMIT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">5</span><span style="color:#D8DEE9FF;"> OFFSET </span><span style="color:#B48EAD;">4</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意：数据检索的行是从第0行开始的。</p></blockquote><p>缩写：逗号前面是OFFSET，后面是LIMIT。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">LIMIT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">4</span><span style="color:#D8DEE9FF;">,</span><span style="color:#B48EAD;">5</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-7-使用注释" tabindex="-1"><a class="header-anchor" href="#_2-7-使用注释" aria-hidden="true">#</a> 2.7 使用注释</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#616E88;">-- 这是一条行内注释</span></span>
<span class="line"><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D8DEE9FF;"># 这是一条注释</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">/*</span></span>
<span class="line"><span style="color:#616E88;">SELECT ...</span></span>
<span class="line"><span style="color:#616E88;">SELECT ...</span></span>
<span class="line"><span style="color:#616E88;">这是多行注释</span></span>
<span class="line"><span style="color:#616E88;">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="第三章-排序检索数据" tabindex="-1"><a class="header-anchor" href="#第三章-排序检索数据" aria-hidden="true">#</a> 第三章 排序检索数据</h2><h3 id="_3-1-排序数据" tabindex="-1"><a class="header-anchor" href="#_3-1-排序数据" aria-hidden="true">#</a> 3.1 排序数据</h3><p>检索的数据如果不排序，数据一般将以它在表中出现的顺序显示。</p><blockquote><p><strong>子句（clause）</strong></p><p>SQL语句由子句组成，有些子句是必须的，有些是可选的。一个子句通常由一个关键字加上所提供的数据组成。</p></blockquote><p>使用<code>ORDER BY</code>子句进行排序。</p><blockquote><p>注意：ORDER BY子句的位置</p><p>ORDER BY子句应该保证它是SELECT语句中最后一条子句。</p></blockquote><h3 id="_3-2-按多个列排序" tabindex="-1"><a class="header-anchor" href="#_3-2-按多个列排序" aria-hidden="true">#</a> 3.2 按多个列排序</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_price, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> prod_price, prod_name;</span></span>
<span class="line"><span style="color:#616E88;">-- 在上面多列排序中，仅在prod_price值相同时才会对prod_name进行排序，如果prod_price值全部唯一则不会对prod_name进行排序</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-3-按列位置排序" tabindex="-1"><a class="header-anchor" href="#_3-3-按列位置排序" aria-hidden="true">#</a> 3.3 按列位置排序</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_price, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">, </span><span style="color:#B48EAD;">3</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"><span style="color:#616E88;">-- 先按第二列也就是prod_price排序，再按第三列排序</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-指定排序方向" tabindex="-1"><a class="header-anchor" href="#_3-4-指定排序方向" aria-hidden="true">#</a> 3.4 指定排序方向</h3><p>数据排序默认是<strong>升序排序</strong>。使用<code>DESC</code>进行降序排序。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_price, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">DESC</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 多个列排序</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_price, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">DESC</span><span style="color:#D8DEE9FF;">, prod_name;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>如果想在多个列上进行降序排序，必须对每一列指定DESC关键字</p></blockquote><h2 id="第四章-过滤数据" tabindex="-1"><a class="header-anchor" href="#第四章-过滤数据" aria-hidden="true">#</a> 第四章 过滤数据</h2><h3 id="_4-1-使用where子句" tabindex="-1"><a class="header-anchor" href="#_4-1-使用where子句" aria-hidden="true">#</a> 4.1 使用WHERE子句</h3><p>在SELECT语句中，数据根据<code>WHERE</code>子句中指定的搜索条件进行过滤。WHERE子句在表名（FROM子句）后面。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">3</span><span style="color:#D8DEE9FF;">.</span><span style="color:#B48EAD;">49</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>提示：SQL过滤和应用过滤</p><p>让SQL检索出超过实际所需的数据，然后客户端代码对数据循环提取出需要的行，这种行为极其不妥。让客户端处理数据库的工作会极大影响应用的性能，使所创建的应用不具备可伸缩性，还会造成带宽的浪费。</p></blockquote><h3 id="_4-2-where子句操作符" tabindex="-1"><a class="header-anchor" href="#_4-2-where子句操作符" aria-hidden="true">#</a> 4.2 WHERE子句操作符</h3><table><thead><tr><th>操作符</th><th>说明</th></tr></thead><tbody><tr><td>=</td><td>等于</td></tr><tr><td>&lt;&gt;</td><td>不等于</td></tr><tr><td>!=</td><td>不等于</td></tr><tr><td>&lt;</td><td>小于</td></tr><tr><td>&lt;=</td><td>小于等于</td></tr><tr><td>!&lt;</td><td>不小于</td></tr><tr><td>&gt;</td><td>大于</td></tr><tr><td>&gt;=</td><td>大于等于</td></tr><tr><td>!&gt;</td><td>不大于</td></tr><tr><td>BETWEEN</td><td>在指定的两个值之间</td></tr><tr><td>IS NULL</td><td>为NULL值</td></tr></tbody></table><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">&lt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_id, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">!=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WhERE</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">BETWEEN</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">5</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_email </span><span style="color:#81A1C1;">IS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_email </span><span style="color:#81A1C1;">IS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>当值与字符串比较需要引号&#39;&#39;，与数值时不用引号。</p></blockquote><blockquote><p><strong>NULL</strong></p><p>在一个列不包含值时，称其包含空值NULL，无值（no value），它与字段包含0、空字符串或仅仅包含空格不同。</p></blockquote><h2 id="第五章-高级数据过滤" tabindex="-1"><a class="header-anchor" href="#第五章-高级数据过滤" aria-hidden="true">#</a> 第五章 高级数据过滤</h2><h3 id="_5-1-组合where子句" tabindex="-1"><a class="header-anchor" href="#_5-1-组合where子句" aria-hidden="true">#</a> 5.1 组合WHERE子句</h3><p>SQL允许给出多个WHERE子句，这些子句可以以AND子句或OR子句的方式使用。</p><p>AND指示DBMS只返回满足所有给定条件的行。OR指示DBMS检索匹配任一条件的行。</p><blockquote><p><strong>操作符（operator）</strong></p><p>用来联结或改变WHERE子句中的子句的关键字，也称为逻辑操作符（logical operator）。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_price, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">&lt;=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">4</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">OR</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">BRS01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> (vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">OR</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">BRS01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> ) </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">&gt;=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-2-in操作符" tabindex="-1"><a class="header-anchor" href="#_5-2-in操作符" aria-hidden="true">#</a> 5.2 IN操作符</h3><p>IN操作符用来指定条件范围。</p><p>使用IN操作符优点：</p><ul><li>更清楚更直观</li><li>与其他AND和OR操作符组合使用IN时，求职顺序更容易管理。</li><li>IN比一组OR执行得更快。</li><li>IN可以包含其他SELECT语句，能够更动态地建立WHERE子句。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">IN</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">BRS01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> prod_name;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_5-3-not操作符" tabindex="-1"><a class="header-anchor" href="#_5-3-not操作符" aria-hidden="true">#</a> 5.3 NOT操作符</h3><p>NOT操作符否定其后所跟的任何条件。NOT在复杂的子句非常有用。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> prod_name;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="第六章-用通配符进行过滤" tabindex="-1"><a class="header-anchor" href="#第六章-用通配符进行过滤" aria-hidden="true">#</a> 第六章 用通配符进行过滤</h2><h3 id="_6-1-like操作符" tabindex="-1"><a class="header-anchor" href="#_6-1-like操作符" aria-hidden="true">#</a> 6.1 LIKE操作符</h3><p>LIKE操作符可以构造一个通配符搜索模式。通配符只能用于<strong>字符串</strong>。</p><ul><li>百分号<code>%</code>表示任何字符出现任意次数，0个，1个或多个。</li><li>下划线<code>_</code>通配符匹配单个字符。</li><li>方括号<code>[]</code>通配符指定一个字符集（MySQL不支持）</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">LIKE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Fish%</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">; </span><span style="color:#616E88;">-- 以Fish开头的匹配</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">LIKE</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">%bean bag%</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">; </span><span style="color:#616E88;">-- 匹配任何有bean bag的字符</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, prod_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_name </span><span style="color:#81A1C1;">LIKE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">__ inch teddy bear</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_6-2-使用通配符技巧" tabindex="-1"><a class="header-anchor" href="#_6-2-使用通配符技巧" aria-hidden="true">#</a> 6.2 使用通配符技巧</h3><p>通配符搜索一般比其他搜索费时更长。使用技巧：</p><ul><li>不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。</li><li>尽量不要把通配符置于开始处，这样搜索是最慢的。</li></ul><h2 id="第七章-创建计算字段" tabindex="-1"><a class="header-anchor" href="#第七章-创建计算字段" aria-hidden="true">#</a> 第七章 创建计算字段</h2><h3 id="_7-1-计算字段" tabindex="-1"><a class="header-anchor" href="#_7-1-计算字段" aria-hidden="true">#</a> 7.1 计算字段</h3><p>计算字段并不实际存在于数据库表中，而是执行SELECT语句动态创建的。</p><h3 id="_7-2-拼接字段" tabindex="-1"><a class="header-anchor" href="#_7-2-拼接字段" aria-hidden="true">#</a> 7.2 拼接字段</h3><p>使用<code>||</code>或<code>+</code>操作符将两个列拼接起来，在Mysql中使用<code>Concat()</code>函数。</p><p><code>TRIM()</code>函数支持去掉空格，<code>LTRIM()</code>和<code>RTRIM()</code>分别去掉左边和右边的空格。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">CONCAT</span><span style="color:#D8DEE9FF;">(vend_name, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, vend_country, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">)</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> vend_name;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">TRIM</span><span style="color:#D8DEE9FF;">(</span><span style="color:#88C0D0;">CONCAT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">     </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">,vend_name, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, vend_country, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">)</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">)) </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> vend_name;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="使用别名" tabindex="-1"><a class="header-anchor" href="#使用别名" aria-hidden="true">#</a> 使用别名</h4><p>别名（alias）是一个字段或值的替换名。使用<code>AS</code>关键字。别名有时也称为导出列（derived column）。</p><p>任何客户端应用都可以按别名名称引用这个列，就像它是一个实际的表列一样。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">CONCAT</span><span style="color:#D8DEE9FF;">(vend_name, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, vend_country, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">)</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> vend_title </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> vend_name;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>说明：在很多DBMS中，AS关键字是可选的，建议最好使用它，这是一种最佳实践。</p></blockquote><h3 id="_7-3-执行算术运算" tabindex="-1"><a class="header-anchor" href="#_7-3-执行算术运算" aria-hidden="true">#</a> 7.3 执行算术运算</h3><table><thead><tr><th>操作符</th><th>说明</th></tr></thead><tbody><tr><td>+</td><td>加</td></tr><tr><td>-</td><td>减</td></tr><tr><td>*</td><td>乘</td></tr><tr><td>/</td><td>除</td></tr></tbody></table><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_id, quantity, item_price, quantity</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">item_price </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> expanded_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">20008</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="第八章-使用函数处理数据" tabindex="-1"><a class="header-anchor" href="#第八章-使用函数处理数据" aria-hidden="true">#</a> 第八章 使用函数处理数据</h2><h3 id="_8-1-函数" tabindex="-1"><a class="header-anchor" href="#_8-1-函数" aria-hidden="true">#</a> 8.1 函数</h3><p>在所有的DBMS中，只有少数的几个函数被所有DBMS支持，基本上每个DBMS都有自己特定的函数。</p><h3 id="_8-2-使用函数" tabindex="-1"><a class="header-anchor" href="#_8-2-使用函数" aria-hidden="true">#</a> 8.2 使用函数</h3><p>大多数SQL支持以下类型的函数：</p><ul><li>用于处理文本字符串（如删除或填充值，转换值为大写或小写）的文本函数。</li><li>用于在数值数据上进行算术操作（如返回绝对值，进行代数运算）的数值函数。</li><li>用于处理日期和时间值并从这些值中提取特定成分的日期和时间函数。</li><li>用于生成美观好懂的输出内容的格式化函数（如用语言形式表达出日期，用货币符号和千分位表示金额）。</li><li>返回DBMS正使用的特殊信息（如返回用户登录信息）的系统函数。</li></ul><h4 id="文本处理函数" tabindex="-1"><a class="header-anchor" href="#文本处理函数" aria-hidden="true">#</a> 文本处理函数</h4><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td><code>LEFT(str, len)</code></td><td>返回字符串左边的字符</td></tr><tr><td><code>LENGTH(str)</code></td><td>返回字符串长度</td></tr><tr><td><code>LOWER(str)</code></td><td>转小写</td></tr><tr><td><code>UPPER(str)</code></td><td>转大写</td></tr><tr><td><code>LTRIM(str)</code></td><td>去掉字符串左边的空格</td></tr><tr><td><code>RIGHT(str, len)</code></td><td>返回字符串右边的字符</td></tr><tr><td><code>SUBSTR()</code>或<code>SUBSTRING()</code></td><td>提取字符串的组成部分</td></tr><tr><td><code>SOUNDEX()</code></td><td>返回字符串的SOUNDEX值</td></tr></tbody></table><p>SOUNDEX是一个将任何文本串转换为描述其语音表示的字母数字模式的算法。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_name, </span><span style="color:#88C0D0;">UPPER</span><span style="color:#D8DEE9FF;">(vend_name) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> vend_name_upcase </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> vend_name; </span><span style="color:#616E88;">-- 转大写</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_name, </span><span style="color:#81A1C1;">LENGTH</span><span style="color:#D8DEE9FF;">(vend_name) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> vend_name_length </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> vend_name; </span><span style="color:#616E88;">-- 获取长度</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="日期和时间处理函数" tabindex="-1"><a class="header-anchor" href="#日期和时间处理函数" aria-hidden="true">#</a> 日期和时间处理函数</h4><p>日期和时间函数在每个DMBS可移植性比较差，不同的DBMS有不同的实现。</p><p>在MySQL中，获取日期比如获取年通过<code>YEAR()</code>函数，想要的月和日都有对应的函数，在其他DMBS，比如SQL Server中获取日期通过<code>DATEPART()</code>函数。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">YEAR</span><span style="color:#D8DEE9FF;">(order_date) </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2020</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">MONTH</span><span style="color:#D8DEE9FF;">(order_date) </span><span style="color:#81A1C1;">as</span><span style="color:#D8DEE9FF;"> order_date_month </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Orders;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="数值处理函数" tabindex="-1"><a class="header-anchor" href="#数值处理函数" aria-hidden="true">#</a> 数值处理函数</h4><p>在主要DBMS的函数中，数值函数是最一致、最统一的函数。</p><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td><code>ABS()</code></td><td>绝对值</td></tr><tr><td><code>COS()</code></td><td>余弦</td></tr><tr><td><code>EXP()</code></td><td>指数值</td></tr><tr><td><code>PI()</code></td><td>圆周率π</td></tr><tr><td><code>SIN()</code></td><td>正弦</td></tr><tr><td><code>SQRT()</code></td><td>平方根</td></tr><tr><td><code>TAN()</code></td><td>正切</td></tr></tbody></table><h2 id="第九章-汇总数据" tabindex="-1"><a class="header-anchor" href="#第九章-汇总数据" aria-hidden="true">#</a> 第九章 汇总数据</h2><h3 id="_9-1-聚集函数" tabindex="-1"><a class="header-anchor" href="#_9-1-聚集函数" aria-hidden="true">#</a> 9.1 聚集函数</h3><p>聚集函数在所有DBMS得到一致的支持。</p><p>例子：</p><ul><li>确定表中行数；</li><li>获取表中某些行的和；</li><li>找出表列的最大值、最小值、平均值。</li></ul><table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td><code>AVG()</code></td><td>返回某列的平均值</td></tr><tr><td><code>COUNT()</code></td><td>返回某列的行数</td></tr><tr><td><code>MAX()</code></td><td>返回某列的最大值</td></tr><tr><td><code>MIN()</code></td><td>返回某列的最小值</td></tr><tr><td><code>SUM()</code></td><td>返回某列值之和</td></tr></tbody></table><p><code>AVG()</code>函数只能用于单个列，它会忽略值为NULL的行。</p><p><code>COUNT()</code>函数有两种使用方式：</p><ul><li>使用<code>COUNT(*)</code>对表中行的数目进行计数，<strong>不会忽略NULL值</strong>。</li><li>使用<code>COUNT(column)</code>对特定列中具有值的行进行计数，<strong>会忽略NULL值</strong>。</li></ul><p><code>MAX()</code>、<code>MIN()</code>和<code>SUM()</code>函数都会忽略NULL的行。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">AVG</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> avg_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">AVG</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> avg_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_cust </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(cust_email) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_cust </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">MAX</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> max_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">MIN</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> min_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">SUM</span><span style="color:#D8DEE9FF;">(quantity) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> item_ordered </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">20005</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_9-2-聚集不同值" tabindex="-1"><a class="header-anchor" href="#_9-2-聚集不同值" aria-hidden="true">#</a> 9.2 聚集不同值</h3><p>5个聚集函数都可以如下使用：</p><ul><li>对所有行执行计算，使用ALL参数（默认就是ALL，可以不填）。</li><li>只包含不同的值，使用DISTINCT参数。</li></ul><blockquote><p>不同的DBMS支持不同的参数，需要查阅相关的文档。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">AVG</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">DISTINCT</span><span style="color:#D8DEE9FF;"> prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> avg_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">DLL01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">; </span><span style="color:#616E88;">-- 返回不同值的平均值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_9-3-组合聚集函数" tabindex="-1"><a class="header-anchor" href="#_9-3-组合聚集函数" aria-hidden="true">#</a> 9.3 组合聚集函数</h3><p>SELECT语句可以包含多个聚集函数。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_items, </span><span style="color:#88C0D0;">MIN</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> price_min, </span><span style="color:#88C0D0;">MAX</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> price_max, </span><span style="color:#88C0D0;">AVG</span><span style="color:#D8DEE9FF;">(prod_price) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> price_avg </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="第十章-分组数据" tabindex="-1"><a class="header-anchor" href="#第十章-分组数据" aria-hidden="true">#</a> 第十章 分组数据</h2><h3 id="_10-1-数据分组" tabindex="-1"><a class="header-anchor" href="#_10-1-数据分组" aria-hidden="true">#</a> 10.1 数据分组</h3><p>使用分组可以将数据分为多个逻辑组，对每个组进行聚集计算。</p><h3 id="_10-2-创建分组" tabindex="-1"><a class="header-anchor" href="#_10-2-创建分组" aria-hidden="true">#</a> 10.2 创建分组</h3><p>GROUP BY子句指示DBMS分组数据，对每个组而不是整个结果集进行聚集。</p><p>GROUP BY子句的一些规定：</p><ul><li>GROUP BY子句可以包含任意数目的列，因而可以对分组进行嵌套，更细致地进行数据分组。</li><li>如果在GROUP BY子句中嵌套了分组，数据将在最后指定的分组上进行汇总。换句话说，在建立分组时，指定的所有列都一起计算。</li><li>GROUP BY子句中列出的每一列都必须是检索列或有效的表达式（不能是聚集函数）。</li><li>大多数SQL实现不允许GROUP BY列带有长度可变的数据类型（如文本或备注型字段）。</li><li>除聚集计算语句外，SELECT语句中的每一列都必须在GROUP BY子句中给出。</li><li>如果分组列中包含有NULL值的行，则NULL将作为一个分组返回。</li><li>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_id, </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_prods </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">GROUP BY</span><span style="color:#D8DEE9FF;"> vend_id;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_10-3-过滤分组" tabindex="-1"><a class="header-anchor" href="#_10-3-过滤分组" aria-hidden="true">#</a> 10.3 过滤分组</h3><p>WHERE过滤指定的行而不是分组，WHERE没有分组的概念。</p><p><code>HAVING</code>子句类似于WHERE，WHERE过滤行，HAVING过滤分组。WHERE在数据分组前进行过滤，HAVING在数据分组后进行过滤。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 过滤分组的行数大于2的分组</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_id, </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> orders </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">GROUP BY</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">HAVING</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">&gt;=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_id, </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_prods </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_price </span><span style="color:#81A1C1;">&gt;=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">4</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">GROUP BY</span><span style="color:#D8DEE9FF;"> vend_id </span><span style="color:#81A1C1;">HAVING</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">&gt;=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>使用HAVING时应该结合GROUP BY子句，而WHERE子句用于标准的行级过滤。</p></blockquote><h3 id="_10-4-分组和排序" tabindex="-1"><a class="header-anchor" href="#_10-4-分组和排序" aria-hidden="true">#</a> 10.4 分组和排序</h3><table><thead><tr><th>ORDER BY</th><th>GROUP BY</th></tr></thead><tbody><tr><td>对产生的输出排序</td><td>对行分组，但输出可能不是分组的排序</td></tr><tr><td>任意列都可以使用（非选择的列也可以使用）</td><td>只可能使用选择列或表达式列，而且必须使用每个选择列表达式</td></tr><tr><td>不一定需要</td><td>如果与聚集函数一起使用列（或表达式），则必须使用</td></tr></tbody></table><blockquote><p>一般在使用GROUP BY子句时，应该也给出ORDER BY子句。这是保证数据正确排序的唯一方法。不要依赖GROUP BY排序数据。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> order_num, </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> items </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">GROUP BY</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">HAVING</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">&gt;=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">3</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> items, order_num;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_10-5-select子句顺序" tabindex="-1"><a class="header-anchor" href="#_10-5-select子句顺序" aria-hidden="true">#</a> 10.5 SELECT子句顺序</h3><table><thead><tr><th>子句</th><th>说明</th><th>是否必须使用</th></tr></thead><tbody><tr><td>SELECT</td><td>要返回的列或表达式</td><td>是</td></tr><tr><td>FROM</td><td>从中检索数据的表</td><td>仅在表选择数据时使用</td></tr><tr><td>WHERE</td><td>行级过滤</td><td>否</td></tr><tr><td>GROUP BY</td><td>分组说明</td><td>仅在按组计算聚集时使用</td></tr><tr><td>HAVING</td><td>组级过滤</td><td>否</td></tr><tr><td>ORDER BY</td><td>输出排序顺序</td><td>否</td></tr></tbody></table><h2 id="第十一章-使用子查询" tabindex="-1"><a class="header-anchor" href="#第十一章-使用子查询" aria-hidden="true">#</a> 第十一章 使用子查询</h2><h3 id="_11-1-子查询" tabindex="-1"><a class="header-anchor" href="#_11-1-子查询" aria-hidden="true">#</a> 11.1 子查询</h3><blockquote><p><strong>查询（query）</strong></p><p>任何SELECT SQL语句都是查询。</p></blockquote><p>子查询总是从内向外处理。子查询的SELECT语句只能查询<strong>单个列</strong>。由于性能的原因，不能嵌套太多的子查询。</p><p><strong>子查询常用于WHERE子句的IN操作符中，以及用来填充计算列。</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">RGAN01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">IN</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">RGAN01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">IN</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">IN</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">RGAN01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">));</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_11-3-作为计算字段使用子查询" tabindex="-1"><a class="header-anchor" href="#_11-3-作为计算字段使用子查询" aria-hidden="true">#</a> 11.3 作为计算字段使用子查询</h3><p>当列名出现相同时，需使用完全限定列名。</p><p>这一章给出的代码并不是解决这种数据检索的最有效方法，可以参考后面的学习。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 返回客户表的信息，包括cust_name,cust_state,还有orders，orders表示客户的订单数</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_state, (</span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> Orders.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Customers.cust_id ) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> orders </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> cust_name;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="第十二章-联结表" tabindex="-1"><a class="header-anchor" href="#第十二章-联结表" aria-hidden="true">#</a> 第十二章 联结表</h2><h3 id="_12-1-联结" tabindex="-1"><a class="header-anchor" href="#_12-1-联结" aria-hidden="true">#</a> 12.1 联结</h3><p>相同的数据在同一张表出现多次不是好事，关系表的设计就是要把信息分解成多个表，一类数据一个表，各表通过某些共同的值互相关联。</p><p>关系数据库可以有效存储，方便地处理，它的伸缩性远比非关系数据库要好。</p><p><strong>联结</strong>是一种机制，用来在一条<code>SELECT</code>语句中关联表。</p><h3 id="_12-2-创建联结" tabindex="-1"><a class="header-anchor" href="#_12-2-创建联结" aria-hidden="true">#</a> 12.2 创建联结</h3><p><code>WHERE</code>子句在联结中起到关键，它将两张表的每一行进行配对，如果没有使用<code>WHERE</code>子句，那么返回的数据将是两张表的乘积。</p><p>下面使用的联结称为<strong>等值联结（equijoin）</strong>，它基于两个表之间的相等测试，这种联结也称为<strong>内联结（inner join）</strong>。</p><p>使用<code>INNER JOIN</code>需要与<code>ON</code>子句搭配。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- Venndors表和Products表联结</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_name, prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors, Products </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> Vendors.vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Products.vend_id;</span></span>
<span class="line"><span style="color:#616E88;">-- 上下两句语法返回相同的结果</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> vend_name, prod_name, prod_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">INNER JOIN</span><span style="color:#D8DEE9FF;"> Products </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Vendors.vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Products.vend_id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 多表联结</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> prod_name, vend_name, prod_price, quantity </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems, Products, Vendors </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> Products.vend_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Vendors.vend_id </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> OrderItems.prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Products.prod_id </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">20007</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers, Orders, OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> OrderItems.order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.order_num </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">RGAN01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>不要联结不必要的表，联结的表越多，性能下降越厉害。</p></blockquote><h2 id="第十三章-创建高级联结" tabindex="-1"><a class="header-anchor" href="#第十三章-创建高级联结" aria-hidden="true">#</a> 第十三章 创建高级联结</h2><h3 id="_13-1-使用表别名" tabindex="-1"><a class="header-anchor" href="#_13-1-使用表别名" aria-hidden="true">#</a> 13.1 使用表别名</h3><p>SQL除了可以对列名和计算字段使用别名，还允许给表名起别名：</p><ul><li>缩短SQL语句；</li><li>允许在一条SELECT语句中多次使用相同的表。</li></ul><p>表别名只能在查询执行中使用，与列别名不一样，表别名不返回到客户端。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> C, Orders </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> O, OrderItems </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> OI </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> C.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> O.cust_id </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> OI.order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> O.order_num </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">RGAN01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_13-2-使用不同类型的联结" tabindex="-1"><a class="header-anchor" href="#_13-2-使用不同类型的联结" aria-hidden="true">#</a> 13.2 使用不同类型的联结</h3><p>其他的联结：自联结（self-join）、自然联结（natural join）和外联结（outer join）。</p><h4 id="自联结" tabindex="-1"><a class="header-anchor" href="#自联结" aria-hidden="true">#</a> 自联结</h4><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 使用子查询</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_id, cust_name, cust_contact </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_name </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_contact </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Jim Jones</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"><span style="color:#616E88;">-- 自联结，使用表别名</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> c1.cust_id, c1.cust_name, c1.cust_contact </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> c1, Customers </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> c2 </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> c1.cust_name </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> c2.cust_name </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> c2.cust_contact </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Jim Jones</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="自然联结" tabindex="-1"><a class="header-anchor" href="#自然联结" aria-hidden="true">#</a> 自然联结</h4><p>标准内联结会返回所有数据，相同的列出现多次。自然联结会排除多次出现，每一列只返回一次。</p><p>自然联结须选择唯一的列。其实，之前迄今为止建立的每个内联结都是自然联结。</p><h4 id="外联结" tabindex="-1"><a class="header-anchor" href="#外联结" aria-hidden="true">#</a> 外联结</h4><p>联结包含了那些相关表中没有关联行的行，这种联结称为外联结。</p><p>外联结使用<code>OUTER JOIN</code>子句，在使用<code>OUTER JOIN</code>语法时，必须使用<code>RIGHT</code>或<code>LEFT</code>关键字指定包括其所有行的表（<code>RIGHT</code>指<code>OUTER JOIN</code>右边的表，<code>LEFT</code>指<code>OUTER JOIN</code>左边的表）。</p><p>检索两个表中的所有行并关联那些可以关联的行，这种联结称为全外联结（full outer join）。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 左外联结</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> Customers.cust_id, Orders.order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">LEFT OUTER JOIN</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id;</span></span>
<span class="line"><span style="color:#616E88;">-- 右外联结</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> Customers.cust_id, Orders.order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">RIGHT OUTER JOIN</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id;</span></span>
<span class="line"><span style="color:#616E88;">-- 全外联结 MySQL不支持</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> Customers.cust_id, Orders.order_num </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">FULL OUTER JOIN</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_13-3-使用带聚集函数的联结" tabindex="-1"><a class="header-anchor" href="#_13-3-使用带聚集函数的联结" aria-hidden="true">#</a> 13.3 使用带聚集函数的联结</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> Customers.cust_id, </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(ORders.order_num) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_ord </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">INNER JOIN</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id </span><span style="color:#81A1C1;">GROUP BY</span><span style="color:#D8DEE9FF;"> Customers.cust_id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 使用左外联结来包含所有顾客</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> Customers.cust_id, </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(ORders.order_num) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> num_ord </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">LEFT OUTER JOIN</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id </span><span style="color:#81A1C1;">GROUP BY</span><span style="color:#D8DEE9FF;"> Customers.cust_id;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_13-4-使用联结和联结条件" tabindex="-1"><a class="header-anchor" href="#_13-4-使用联结和联结条件" aria-hidden="true">#</a> 13.4 使用联结和联结条件</h3><p>使用联结要点：</p><ul><li>注意使用的联结类型。</li><li>熟悉确切的联结语法。</li><li>保证使用正确的联结条件。</li><li>应该总是提供联结条件，否则会得出笛卡尔积。</li><li>在联结前测试每个联结，方便故障排除。</li></ul><h2 id="第十四章-组合查询" tabindex="-1"><a class="header-anchor" href="#第十四章-组合查询" aria-hidden="true">#</a> 第十四章 组合查询</h2><h3 id="_14-1-组合查询" tabindex="-1"><a class="header-anchor" href="#_14-1-组合查询" aria-hidden="true">#</a> 14.1 组合查询</h3><p>SQL允许执行多个查询，并将结果作为一个查询结果集返回，这种组合查询通常称为并（union）或复合查询（compound query）。</p><p>两种情况下需要用组合查询：</p><ul><li>在一个查询中从不同的表返回结构数据。</li><li>对一个表执行多个查询，按一个查询返回数据。</li></ul><h3 id="_14-2-创建组合查询" tabindex="-1"><a class="header-anchor" href="#_14-2-创建组合查询" aria-hidden="true">#</a> 14.2 创建组合查询</h3><p><code>UNION</code>操作符用于将多条<code>SELECT</code>语句结果组成一个结果集。<code>UNION</code>几乎总是完成与多个<code>WHERE</code>条件相同的工作。</p><p><code>UNION</code>默认情况下对结果集会进行去重。使用<code>UNION ALL</code>则不去重。</p><p>使用<code>UNION</code>的几条规则：</p><ul><li><code>UNION</code>必须由两条或两条以上的<code>SELECT</code>语句组成。</li><li><code>UNION</code>中的每个查询必须包含相同的列、表达式或聚集函数。</li><li>类型不必完全相同，但必须是DMBS可以隐含转换的类型。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact, cust_email </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_state </span><span style="color:#81A1C1;">IN</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">IL</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">IN</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">MI</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">UNION</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact, cust_email </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_name </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Fun4All</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- ORDER BY必须位于最后一条SELECT语句之后</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact, cust_email </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_state </span><span style="color:#81A1C1;">IN</span><span style="color:#D8DEE9FF;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">IL</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">IN</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">MI</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">UNION</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact, cust_email </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_name </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Fun4All</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">ORDER BY</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="第十五章-插入数据" tabindex="-1"><a class="header-anchor" href="#第十五章-插入数据" aria-hidden="true">#</a> 第十五章 插入数据</h2><h3 id="_15-1-数据插入" tabindex="-1"><a class="header-anchor" href="#_15-1-数据插入" aria-hidden="true">#</a> 15.1 数据插入</h3><p><code>INSERT</code>用来将行插入到数据库表中。插入有几种方式：</p><ul><li>插入完整的行；</li><li>插入行的一部分；</li><li>插入某些查询的结果。</li></ul><blockquote><p>使用<code>INSERT</code>语句需要有DMBS特定的安全权限。</p></blockquote><h5 id="插入完整的行" tabindex="-1"><a class="header-anchor" href="#插入完整的行" aria-hidden="true">#</a> 插入完整的行</h5><p>各列必须以它们在表定义中出现的次序填充。<strong>这种语法不安全，需要依赖特定列次序，不建议使用，不要使用没有明确给出列的INSERT语句，给出列能在表结构发生变化时仍能继续使用。</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">VALUES</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1000000006</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Toy Land</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">123 Any Street</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">New York</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">NY</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">11111</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">USA</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">, </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 这种比较繁琐，但更安全</span></span>
<span class="line"><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> Customers(cust_id,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country,cust_contact,cust_email) </span><span style="color:#81A1C1;">VALUES</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1000000006</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Toy Land</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">123 Any Street</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">New York</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">NY</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">11111</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">USA</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">, </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="插入部分行" tabindex="-1"><a class="header-anchor" href="#插入部分行" aria-hidden="true">#</a> 插入部分行</h4><p>只给出部分的列名。省略列的满足条件：</p><ul><li>该列定义允许为NULL值。</li><li>在表定义中给出默认值。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> Customers(cust_id,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country) </span><span style="color:#81A1C1;">VALUES</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1000000006</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Toy Land</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">,</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">123 Any Street</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">New York</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">NY</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">11111</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">USA</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="插入检索出的数据" tabindex="-1"><a class="header-anchor" href="#插入检索出的数据" aria-hidden="true">#</a> 插入检索出的数据</h4><p>将SELECT语句的结果插入表中。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> Customers(cust_id,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country) </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_id,cust_name,cust_address,cust_city,cust_state,cust_zip,cust_country </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> CustNew;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p><code>INSERT</code>通常只插入一行，要插入多行，必须执行多个<code>INSERT</code>语句。<code>INSERT SELECT</code>可以插入多行。</p></blockquote><h3 id="_15-2-从一个表复制到另一个表" tabindex="-1"><a class="header-anchor" href="#_15-2-从一个表复制到另一个表" aria-hidden="true">#</a> 15.2 从一个表复制到另一个表</h3><p>使用<code>CREATE SELECT</code>语句。注意事项：</p><ul><li>任何SELECT选项和子句都可以使用，包括WHERE和GROUP BY；</li><li>可利用联结从多个表插入数据；</li><li>不管从多少个表中检索数据，数据都只能插入到一个表中。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> CustCopy </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="第十六章-更新和删除数据" tabindex="-1"><a class="header-anchor" href="#第十六章-更新和删除数据" aria-hidden="true">#</a> 第十六章 更新和删除数据</h2><h3 id="_16-1-更新数据" tabindex="-1"><a class="header-anchor" href="#_16-1-更新数据" aria-hidden="true">#</a> 16.1 更新数据</h3><p><code>UPDATE</code>语句更新数据：</p><ul><li>更新表中的特定行；</li><li>更新表中的所有行；</li></ul><blockquote><p><code>UPDATE</code>语句需要安全权限。</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 如果不指定WHERE子句，将会更新表中所有的行</span></span>
<span class="line"><span style="color:#81A1C1;">UPDATE</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">SET</span><span style="color:#D8DEE9FF;"> cust_email </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">kim@thetoystore.com</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1000000005</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">UPDATE</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">SET</span><span style="color:#D8DEE9FF;"> cust_contact </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">Sam Roberts</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, cust_email </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">sam@toyland.com</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1000000005</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果要删除某个列的值，可以将其设置为NULL。</p><h3 id="_16-2-删除数据" tabindex="-1"><a class="header-anchor" href="#_16-2-删除数据" aria-hidden="true">#</a> 16.2 删除数据</h3><p><code>DELETE</code>语句删除数据：</p><ul><li>从表中删除特定的行；</li><li>删除表中所有行。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 省略WHERE将删除所有数据</span></span>
<span class="line"><span style="color:#81A1C1;">DELETE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1000000006</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果想删除所有行，可以使用<code>TRUNCATE TABLE</code>语句，它的执行速度更快。</p><h3 id="_16-3-更新和删除的指导原则" tabindex="-1"><a class="header-anchor" href="#_16-3-更新和删除的指导原则" aria-hidden="true">#</a> 16.3 更新和删除的指导原则</h3><ul><li>保证每个表都有主键，尽可能像WHERE子句那样使用它。</li><li>使用UPDATE或DELETE语句之前先用SELECT进行测试，确保过滤的数据是正确的。</li><li>使用强制实施引用完整性的数据库，这样DBMS将不允许删除其数据与其他表相关联的行。</li></ul><h2 id="第十七章-创建和操作表" tabindex="-1"><a class="header-anchor" href="#第十七章-创建和操作表" aria-hidden="true">#</a> 第十七章 创建和操作表</h2><h3 id="_17-1-创建表" tabindex="-1"><a class="header-anchor" href="#_17-1-创建表" aria-hidden="true">#</a> 17.1 创建表</h3><p><code>CREATE TABLE</code>语句创建表。</p><p>每个表要么是<code>NULL</code>列，要么是<code>NOT NULL</code>列。如果不指定<code>NOT NULL</code>，默认就是<code>NULL</code>。</p><p>使用<code>DEFAULT</code>指定默认值。默认值常用于日期和时间戳列。指定默认日期在MySQL中使用<code>DEFAULT CURRENT_DATE()</code>。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Products2</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_name </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">254</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_price </span><span style="color:#81A1C1;">DECIMAL</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">8</span><span style="color:#D8DEE9FF;">,</span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prode_desc </span><span style="color:#81A1C1;">VARCHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1000</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">-- 允许NULL值</span></span>
<span class="line"><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Vendors2</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_name </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">50</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_address </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">50</span><span style="color:#D8DEE9FF;">),</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_city </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">50</span><span style="color:#D8DEE9FF;">),</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_state </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">5</span><span style="color:#D8DEE9FF;">),</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_zip </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">),</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_country </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">50</span><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> OrderItems2</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	order_num </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	order_item </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	quatity </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">DEFAULT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">1</span><span style="color:#D8DEE9FF;">, </span><span style="color:#616E88;">-- 默认值</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	item_price </span><span style="color:#81A1C1;">DECIMAL</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">8</span><span style="color:#D8DEE9FF;">,</span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span></span>
<span class="line"><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_17-2-更新表" tabindex="-1"><a class="header-anchor" href="#_17-2-更新表" aria-hidden="true">#</a> 17.2 更新表</h3><p><code>ALTER TABLE</code>语句更新表。注意事项：理想情况下，不要在表中包含数据时对其进行更新。应该在表设计过程考虑兼容性。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">ALTER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">ADD</span><span style="color:#D8DEE9FF;"> vend_phone </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">20</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">ALTER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Vendors </span><span style="color:#81A1C1;">DROP</span><span style="color:#D8DEE9FF;"> COLUMN vend_phone;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>使用<code>ALTER TABLE</code>需要极其小心，数据库的更改不能撤销，一旦删除就无法复原。</p></blockquote><h3 id="_17-3-删除表" tabindex="-1"><a class="header-anchor" href="#_17-3-删除表" aria-hidden="true">#</a> 17.3 删除表</h3><p>建议启用防止删除与其他表相关联的表功能，可以防止意外删除有用的表。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">DROP</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Products2;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_17-4-重命名表" tabindex="-1"><a class="header-anchor" href="#_17-4-重命名表" aria-hidden="true">#</a> 17.4 重命名表</h3><p>每个DBMS对表重命名的支持有所不同，可以查阅相关的DBMS文档。</p><h2 id="第十八章-使用视图" tabindex="-1"><a class="header-anchor" href="#第十八章-使用视图" aria-hidden="true">#</a> 第十八章 使用视图</h2><h3 id="_18-1-视图" tabindex="-1"><a class="header-anchor" href="#_18-1-视图" aria-hidden="true">#</a> 18.1 视图</h3><p>视图是虚拟的表，视图只包含使用时动态检索数据的查询。作为视图，它不包含任何列或数据，包含的是一个查询。</p><p>视图应用：</p><ul><li>重用SQL语句。</li><li>简化复杂的SQL操作。</li><li>使用表的一部分而不是整个表。</li><li>保护数据。可以授权用户访问表的特定部分的权限。</li><li>更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。</li></ul><p>视图限制：</p><ul><li>视图必须唯一命名。</li><li>创建的视图数目没有限制。</li><li>创建视图，必须具有足够的访问权限。</li><li>视图可以嵌套，可以利用从其他视图中检索数据的查询来构造视图（嵌套视图可能会降低性能）。</li><li>禁止在视图查询使用ORDER BY子句。</li><li>视图不能索引，也不能有关联的触发器或默认值。</li><li>有些DBMS把视图作为只读的查询。</li></ul><h3 id="_18-2-创建视图" tabindex="-1"><a class="header-anchor" href="#_18-2-创建视图" aria-hidden="true">#</a> 18.2 创建视图</h3><p>视图极大地简化复杂SQL语句的使用。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> VIEW ProductCustomers </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact, prod_id </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers, Orders, OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.cust_id </span><span style="color:#81A1C1;">AND</span><span style="color:#D8DEE9FF;"> OrderItems.order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> Orders.order_num;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_name, cust_contact </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> ProductCustomers </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> prod_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">RGAN01</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>视图的另一个用途是重新格式化检索出的数据。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> VIEW VendorLocations </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">CONCAT</span><span style="color:#D8DEE9FF;">(vend_name, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;"> (</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">, vend_country, </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">)</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> vend_title </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Vendors;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> VendorLocations;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>用视图过滤不想要的数据：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> VIEW CustomerEmailList </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> cust_id, cust_name, cust_email </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers	</span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_email </span><span style="color:#81A1C1;">IS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> CustomerEmailList;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用视图与计算字段</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> VIEW OrderItemsExpanded </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> order_num, prod_id, quantity, item_price, quantity</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">item_price </span><span style="color:#81A1C1;">AS</span><span style="color:#D8DEE9FF;"> expanded_price </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItems;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrderItemsExpanded </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">20008</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="第十九章-使用存储过程" tabindex="-1"><a class="header-anchor" href="#第十九章-使用存储过程" aria-hidden="true">#</a> 第十九章 使用存储过程</h2><h3 id="_19-1-存储过程" tabindex="-1"><a class="header-anchor" href="#_19-1-存储过程" aria-hidden="true">#</a> 19.1 存储过程</h3><p>存储过程就是为以后使用而保存的一条或多条SQL语句，可将其视为批文件。</p><p><code>EXECUTE</code>接受存储过程名和需要传递给它的任何参数。</p><h3 id="_19-4-创建存储过程" tabindex="-1"><a class="header-anchor" href="#_19-4-创建存储过程" aria-hidden="true">#</a> 19.4 创建存储过程</h3><p>Oracle版</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">PROCEDURE</span><span style="color:#D8DEE9FF;"> MailingListCount(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">ListCount </span><span style="color:#81A1C1;">OUT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTEGER</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"><span style="color:#81A1C1;">IS</span><span style="color:#D8DEE9FF;"> v_rows </span><span style="color:#81A1C1;">INTEGER</span></span>
<span class="line"><span style="color:#81A1C1;">BEGIN</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">COUNT</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;">) INFO v_rows</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> cust_email </span><span style="color:#81A1C1;">IS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	ListCount :</span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> v_rows;</span></span>
<span class="line"><span style="color:#81A1C1;">END</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>具体的存储过程请查阅相关的DBMS文档。</p><h2 id="第二十章-管理事务处理" tabindex="-1"><a class="header-anchor" href="#第二十章-管理事务处理" aria-hidden="true">#</a> 第二十章 管理事务处理</h2><h3 id="_20-1-事务处理" tabindex="-1"><a class="header-anchor" href="#_20-1-事务处理" aria-hidden="true">#</a> 20.1 事务处理</h3><p>事务处理（transaction processing），通过确保成批的SQL操作要么完全执行，要么完全不执行，来维护数据库的完整性。</p><p>事务是一种机制，用来管理成批执行的SQL操作，保证数据库不包含不完整的操作结果。</p><p>事务可以<strong>回退</strong><code>INSERT</code>、<code>UPDATE</code>和<code>DELETE</code>语句。</p><h3 id="_20-2-控制事务处理" tabindex="-1"><a class="header-anchor" href="#_20-2-控制事务处理" aria-hidden="true">#</a> 20.2 控制事务处理</h3><p>MySQL中启用事务：</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">START</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TRANSACTION</span></span>
<span class="line"><span style="color:#D8DEE9FF;">...</span></span>
<span class="line"><span style="color:#81A1C1;">COMMIT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TRANSACTION</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用<code>ROLLBACK</code>命令回退SQL语句。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">DELETE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> OrdersCopy;</span></span>
<span class="line"><span style="color:#81A1C1;">ROLLBACK</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>一般的SQL语句都是针对数据库表直接执行和编写的，这就是所谓的隐式提交（implicit commit），即提交（或保存）是自动进行的。</p><p>在事务处理块中，提交不会隐式进行。使用<code>COMMIT</code>进行提交。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- SQL Server中使用COMMIT</span></span>
<span class="line"><span style="color:#81A1C1;">BEGIN</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TRANSACTION</span></span>
<span class="line"><span style="color:#81A1C1;">DELETE</span><span style="color:#D8DEE9FF;"> OrderItems </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">12345</span></span>
<span class="line"><span style="color:#81A1C1;">DELETE</span><span style="color:#D8DEE9FF;"> Orders </span><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> order_num </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">12345</span></span>
<span class="line"><span style="color:#81A1C1;">COMMIT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TRANSACTION</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>事务支持回退部分，在事务处理块中的合适位置放置占位符，这些占位符称为保留点。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#D8DEE9FF;">SAVEPOINT delete1; </span><span style="color:#616E88;">-- 放置保留点</span></span>
<span class="line"><span style="color:#81A1C1;">ROLLBACK</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TO</span><span style="color:#D8DEE9FF;"> delete1; </span><span style="color:#616E88;">-- 回退到保留点</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="第二十一章-使用游标" tabindex="-1"><a class="header-anchor" href="#第二十一章-使用游标" aria-hidden="true">#</a> 第二十一章 使用游标</h2><h3 id="_21-1-游标" tabindex="-1"><a class="header-anchor" href="#_21-1-游标" aria-hidden="true">#</a> 21.1 游标</h3><p>SQL检索操作返回一组称为结果集的行，简单的使用SELECT语句，没有办法得到第一行、下一行或前10行。需要在检索出来的行中前进或后退一行或多行，这就是游标的用途所在。</p><p>游标（cursor）是一个存储在DBMS服务器上的数据库查询，它不是一条SELECT语句，而是被该语句检索出来的结果集。在存储了游标之后，应用程序可以根据需要滚动或浏览其中的数据。</p><p>游标主要用于交互式应用，其中用户需要滚动屏幕上的数据，并对数据进行浏览或做出更改。</p><h3 id="_21-2-使用游标" tabindex="-1"><a class="header-anchor" href="#_21-2-使用游标" aria-hidden="true">#</a> 21.2 使用游标</h3><p><code>FETCH ... INTO ...</code>使用游标</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- 创建游标</span></span>
<span class="line"><span style="color:#81A1C1;">DECLARE</span><span style="color:#D8DEE9FF;"> CustCursor </span><span style="color:#81A1C1;">CURSOR</span></span>
<span class="line"><span style="color:#D8DEE9FF;">FOR</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">*</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> Customers</span></span>
<span class="line"><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> cust_email </span><span style="color:#81A1C1;">IS</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 打开游标</span></span>
<span class="line"><span style="color:#81A1C1;">OPEN</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">CURSOR</span><span style="color:#D8DEE9FF;"> CustCursor;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 使用游标</span></span>
<span class="line"><span style="color:#81A1C1;">FETCH</span><span style="color:#D8DEE9FF;"> CustCursor </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> ...;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 关闭游标</span></span>
<span class="line"><span style="color:#81A1C1;">CLOSE</span><span style="color:#D8DEE9FF;"> CustCursor;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="第二十二章-高级sql特性" tabindex="-1"><a class="header-anchor" href="#第二十二章-高级sql特性" aria-hidden="true">#</a> 第二十二章 高级SQL特性</h2><h3 id="_22-1-约束" tabindex="-1"><a class="header-anchor" href="#_22-1-约束" aria-hidden="true">#</a> 22.1 约束</h3><p>约束（constraint），管理如何插入或处理数据库数据的规则。DBMS通过在数据库表上施加约束来实施引用完整性。</p><h4 id="主键-1" tabindex="-1"><a class="header-anchor" href="#主键-1" aria-hidden="true">#</a> 主键</h4><p>主键是一种特殊的约束，用来保证一列中的值是唯一的。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Products2</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">PRIMARY</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">KEY</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	vend_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_name </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">254</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_price </span><span style="color:#81A1C1;">DECIMAL</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">8</span><span style="color:#D8DEE9FF;">,</span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prode_desc </span><span style="color:#81A1C1;">VARCHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">1000</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#616E88;">-- 允许NULL值</span></span>
<span class="line"><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="外键" tabindex="-1"><a class="header-anchor" href="#外键" aria-hidden="true">#</a> 外键</h4><p>外键是表中的一列，其值必须列在另一表的主键中。外键是保证引用完整性的极其重要部分。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Orders</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	order_num </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">PRIMARY</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">KEY</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	order_date </span><span style="color:#81A1C1;">DATETIME</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	cust_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">REFERENCES</span><span style="color:#D8DEE9FF;"> Customers(cust_id)</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">ALTER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;">  Orders </span><span style="color:#81A1C1;">ADD</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">CONSTRAINT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FOREIGN KEY</span><span style="color:#D8DEE9FF;"> (cust_id) </span><span style="color:#81A1C1;">REFERENCES</span><span style="color:#D8DEE9FF;"> Customers (cust_id);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="唯一约束" tabindex="-1"><a class="header-anchor" href="#唯一约束" aria-hidden="true">#</a> 唯一约束</h4><p>唯一约束用来保证一列（或一组列）中的数据是唯一的。它们类似于主键，但存在以下区别：</p><ul><li>表可包含多个约束，但每个表只允许一个主键。</li><li>唯一约束列可包含NULL值。</li><li>唯一约束列可修改或更新。</li><li>唯一约束列的值可重复使用。</li><li>与主键不一样，唯一约束不能用来定义外键。</li></ul><p>使用<code>UNIQUE</code>约束定义。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> OrderItems2</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	order_num </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	order_item </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	prod_id </span><span style="color:#81A1C1;">CHAR</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">10</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;">,</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	quatity </span><span style="color:#81A1C1;">INTEGER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">CHECK</span><span style="color:#D8DEE9FF;"> (quatity </span><span style="color:#81A1C1;">&gt;</span><span style="color:#D8DEE9FF;"> </span><span style="color:#B48EAD;">0</span><span style="color:#D8DEE9FF;">), </span><span style="color:#616E88;">-- 必须大于0</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	item_price </span><span style="color:#81A1C1;">DECIMAL</span><span style="color:#D8DEE9FF;">(</span><span style="color:#B48EAD;">8</span><span style="color:#D8DEE9FF;">,</span><span style="color:#B48EAD;">2</span><span style="color:#D8DEE9FF;">) </span><span style="color:#81A1C1;">NOT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">NULL</span></span>
<span class="line"><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">-- 修改表方式</span></span>
<span class="line"><span style="color:#81A1C1;">ALTER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> Customers </span><span style="color:#81A1C1;">ADD</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">CONSTRAINT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">CHECK</span><span style="color:#D8DEE9FF;"> ( gender </span><span style="color:#81A1C1;">LIKE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#ECEFF4;">&#39;</span><span style="color:#A3BE8C;">[MF]</span><span style="color:#ECEFF4;">&#39;</span><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><p>自定义数据类型：有些DBMS支持自定义数据类型，只需施加约束一次，后面都可以通过这个类型直接复用。</p></blockquote><h3 id="_22-2-索引" tabindex="-1"><a class="header-anchor" href="#_22-2-索引" aria-hidden="true">#</a> 22.2 索引</h3><p>索引用来排序数据以加快搜索和排序操作的速度。可以在一个或多个列上定义索引，使DBMS保存其内容是一个排过序的列表。</p><ul><li>索引改善检索操作的性能，但降低了数据插入、修改和删除的性能。在执行这些操作时，DBMS必须动态地更新索引。</li><li>索引数据可能要占用大量的存储空间。</li><li>并非所有数据都适合做索引。</li><li>索引用于数据过滤和数据排序。</li><li>可以在索引中定义多个列。</li></ul><p><code>CREATE INDEX</code>语句创建索引。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INDEX</span><span style="color:#D8DEE9FF;"> prod_name_id </span><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Products (prod_name);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_22-3-触发器" tabindex="-1"><a class="header-anchor" href="#_22-3-触发器" aria-hidden="true">#</a> 22.3 触发器</h3><p>触发器是特殊的存储过程，它在特定的数据库活动发生时自动执行。触发器可以与特定表上的INSERT、UPDATE和DELETE操作相关联。</p><p>与存储过程不一样，触发器与单个的表相关联。触发器内的代码具有以下数据的访问权：</p><ul><li>INSERT操作中的所有新数据；</li><li>UPDATE操作中的所有新数据和旧数据；</li><li>DELETE操作中删除的数据。</li></ul><p>触发器可在特定操作执行之前或之后执行。</p><p>触发器的用途：</p><ul><li>保证数据一致。</li><li>基于某个表的变动在其他表上执行活动。例如，每当更新或删除一行时将审计跟踪记录写入某个日志表。</li><li>进行额外的验证并根据需要回退数据。例如，保证某个顾客的可用资金不超限定，如果已经超出，则阻塞插入。</li><li>计算计算列的值或更新时间戳。</li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#616E88;">-- SQL Server版本</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> TRIGGER customer_state</span></span>
<span class="line"><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> Customers</span></span>
<span class="line"><span style="color:#D8DEE9FF;">FOR </span><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;">, </span><span style="color:#81A1C1;">UPDATE</span></span>
<span class="line"><span style="color:#81A1C1;">AS</span></span>
<span class="line"><span style="color:#81A1C1;">UPDATE</span><span style="color:#D8DEE9FF;"> Customers</span></span>
<span class="line"><span style="color:#81A1C1;">SET</span><span style="color:#D8DEE9FF;"> cust_state </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#88C0D0;">UPPER</span><span style="color:#D8DEE9FF;">(cust_state)</span></span>
<span class="line"><span style="color:#81A1C1;">WHERE</span><span style="color:#D8DEE9FF;"> Customers.cust_id </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> inserted.cust_id;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p><strong>约束比触发器更快</strong></p><p>尽量使用约束。</p></blockquote><h3 id="_22-4-数据库安全" tabindex="-1"><a class="header-anchor" href="#_22-4-数据库安全" aria-hidden="true">#</a> 22.4 数据库安全</h3><p>大多数DBMS都给管理员提供了管理机制，利用管理机制授予或限制对数据的访问。</p><p>一般需要保护的操作有：</p><ul><li>对数据库管理功能的访问；</li><li>对特定数据库或表的访问；</li><li>访问的类型；</li><li>仅通过视图或存储过程对表进行访问；</li><li>创建多层次的安全措施，从而允许多种基于登录的访问和控制；</li><li>限制管理用户账号的能力。</li></ul><p>使用<code>GRANT</code>和<code>REVOKE</code>语句来管理。</p><h2 id="附录b-sql语句的语法" tabindex="-1"><a class="header-anchor" href="#附录b-sql语句的语法" aria-hidden="true">#</a> 附录B SQL语句的语法</h2><h3 id="alter-table" tabindex="-1"><a class="header-anchor" href="#alter-table" aria-hidden="true">#</a> ALTER TABLE</h3><p>修改表结构。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">ALTER</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> tablename</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	</span><span style="color:#81A1C1;">ADD</span><span style="color:#D8DEE9FF;">|</span><span style="color:#81A1C1;">DROP</span><span style="color:#D8DEE9FF;"> column datatype [NULL|NOT NULL] [CONSTRAINTS],</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  </span><span style="color:#81A1C1;">ADD</span><span style="color:#D8DEE9FF;">|</span><span style="color:#81A1C1;">DROP</span><span style="color:#D8DEE9FF;"> column datatype [NULL|NOT NULL] [CONSTRAINTS],</span></span>
<span class="line"><span style="color:#D8DEE9FF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="commit" tabindex="-1"><a class="header-anchor" href="#commit" aria-hidden="true">#</a> COMMIT</h3><p>提交事务。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">COMMIT</span><span style="color:#D8DEE9FF;"> [TRANSACTION];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="create-index" tabindex="-1"><a class="header-anchor" href="#create-index" aria-hidden="true">#</a> CREATE INDEX</h3><p>创建索引。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INDEX</span><span style="color:#D8DEE9FF;"> indexname</span></span>
<span class="line"><span style="color:#81A1C1;">ON</span><span style="color:#D8DEE9FF;"> tablename (column, ...);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="create-procedure" tabindex="-1"><a class="header-anchor" href="#create-procedure" aria-hidden="true">#</a> CREATE PROCEDURE</h3><p>创建存储过程。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">PROCEDURE</span><span style="color:#D8DEE9FF;"> procedurename [parameters] [options]</span></span>
<span class="line"><span style="color:#81A1C1;">AS</span></span>
<span class="line"><span style="color:#81A1C1;">SQL</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">statement</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="create-table" tabindex="-1"><a class="header-anchor" href="#create-table" aria-hidden="true">#</a> CREATE TABLE</h3><p>创建表。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;"> tablename</span></span>
<span class="line"><span style="color:#D8DEE9FF;">(</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	column datatype [NULL|NOT NULL] [CONSTRAINTS],</span></span>
<span class="line"><span style="color:#D8DEE9FF;">	column datatype [NULL|NOT NULL] [CONSTRAINTS],</span></span>
<span class="line"><span style="color:#D8DEE9FF;">  ...</span></span>
<span class="line"><span style="color:#D8DEE9FF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="create-view" tabindex="-1"><a class="header-anchor" href="#create-view" aria-hidden="true">#</a> CREATE VIEW</h3><p>创建视图。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">CREATE</span><span style="color:#D8DEE9FF;"> VIEW viewname </span><span style="color:#81A1C1;">AS</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> columns, ...</span></span>
<span class="line"><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> tables, ...</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[WHERE ...]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[GROUP BY ...]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[HAVING ...];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="delete" tabindex="-1"><a class="header-anchor" href="#delete" aria-hidden="true">#</a> DELETE</h3><p>删除一行或多行。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">DELETE</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> tablename</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[WHERE ...];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="drop" tabindex="-1"><a class="header-anchor" href="#drop" aria-hidden="true">#</a> DROP</h3><p>删除数据库对象（表、视图、索引等）。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">DROP</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INDEX</span><span style="color:#D8DEE9FF;">|</span><span style="color:#81A1C1;">PROCEDURE</span><span style="color:#D8DEE9FF;">|</span><span style="color:#81A1C1;">TABLE</span><span style="color:#D8DEE9FF;">|VIEW indexname|procedurename|tablename|viewname;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="insert" tabindex="-1"><a class="header-anchor" href="#insert" aria-hidden="true">#</a> INSERT</h3><p>插入一行数据。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> tablename [(columns, ...)]</span></span>
<span class="line"><span style="color:#81A1C1;">VALUES</span><span style="color:#D8DEE9FF;">(</span><span style="color:#81A1C1;">values</span><span style="color:#D8DEE9FF;">, ...);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="insert-select" tabindex="-1"><a class="header-anchor" href="#insert-select" aria-hidden="true">#</a> INSERT SELECT</h3><p>将SELECT结果插入到一个表中。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">INSERT</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">INTO</span><span style="color:#D8DEE9FF;"> tablename [(columns, ...)]</span></span>
<span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> columns, ... </span><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> tablename, ...</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[WHERE ...];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="rollback" tabindex="-1"><a class="header-anchor" href="#rollback" aria-hidden="true">#</a> ROLLBACK</h3><p>撤销一个事务。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">ROLLBACK</span><span style="color:#D8DEE9FF;"> [TO savepointname];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">ROLLBACK</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">TRANSACTION</span><span style="color:#D8DEE9FF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="select" tabindex="-1"><a class="header-anchor" href="#select" aria-hidden="true">#</a> SELECT</h3><p>查询。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">SELECT</span><span style="color:#D8DEE9FF;"> columnname, ...</span></span>
<span class="line"><span style="color:#81A1C1;">FROM</span><span style="color:#D8DEE9FF;"> tablename, ...</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[WHERE ...]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[UNION ...]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[GROUP BY ...]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[HAVING ...]</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[ORDER BY ...];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="update" tabindex="-1"><a class="header-anchor" href="#update" aria-hidden="true">#</a> UPDATE</h3><p>更新表中的一行或多行。</p><div class="language-sql ext-sql line-numbers-mode"><pre class="shiki" style="background-color:#2e3440ff;"><code><span class="line"><span style="color:#81A1C1;">UPDATE</span><span style="color:#D8DEE9FF;"> tablename</span></span>
<span class="line"><span style="color:#81A1C1;">SET</span><span style="color:#D8DEE9FF;"> columnname </span><span style="color:#81A1C1;">=</span><span style="color:#D8DEE9FF;"> </span><span style="color:#81A1C1;">value</span><span style="color:#D8DEE9FF;">, ...</span></span>
<span class="line"><span style="color:#D8DEE9FF;">[WHERE ...];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="附录c-sql数据类型" tabindex="-1"><a class="header-anchor" href="#附录c-sql数据类型" aria-hidden="true">#</a> 附录C SQL数据类型</h2><p>数据类型用于以下目的：</p><ul><li>数据类型允许限制可存储在列中的数据。</li><li>数据类型允许在内部更有效地存储数据。</li><li>数据类型允许变换排序顺序。</li></ul><p>在设计表时，应该特别重视所用的数据 类型。使用错误的数据类型可能会严重影响应用程序的功能和性能。</p><blockquote><p>不同的DBMS的数据类型有可能不同。</p></blockquote><h3 id="字符串数据类型" tabindex="-1"><a class="header-anchor" href="#字符串数据类型" aria-hidden="true">#</a> 字符串数据类型</h3><p>两种基本的字符串类型，定长字符串和变长字符串。</p><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td><code>CHAR</code></td><td>1~255个字符的定长字符串。它的长度必须在创建时规定</td></tr><tr><td><code>NCHAR</code></td><td><code>CHAR</code>的特殊类型，用来支持多字节或Unicode字符</td></tr><tr><td><code>NVARCHAR</code></td><td><code>TEXT</code>的特殊形式，用来支持多字节或Unicode字符</td></tr><tr><td><code>TEXT</code>（也称为<code>LOGN</code>、<code>MEMO</code>或<code>VARCHAR</code>）</td><td>变长文本</td></tr></tbody></table><p>定长字符会根据接受固定的长度存储，及时没有所存储的字符串没有达到该长度，则会通过空格填充。</p><p>变长字符串只有指定的数据会得以保存。</p><p>DBMS处理定长列远比处理变长列性能要快得多，而且变长列不允许被索引。</p><blockquote><p><strong>数值类型注意</strong></p><p>如果数值是计算（求和、平均等）中使用的数值，则应该存储在数值数据类型中；如果作为字符串（可能只包含数字）使用，则应该保存在字符串数据类型中。</p></blockquote><h3 id="数值数据类型" tabindex="-1"><a class="header-anchor" href="#数值数据类型" aria-hidden="true">#</a> 数值数据类型</h3><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td><code>BIT</code></td><td>单个二进制位值，或者为0或者为1，主要用于开/关标志</td></tr><tr><td><code>DECIMAL</code>（或<code>NUMERIC</code>）</td><td>定点或精度可变的浮点值</td></tr><tr><td><code>FLOAT</code>（或<code>NUMBER</code>）</td><td>浮点值</td></tr><tr><td><code>INT</code>或（<code>INTEGER</code>）</td><td>4字节整数值，支持-2147483648~2147483648的数</td></tr><tr><td><code>REAL</code></td><td>4字节浮点值</td></tr><tr><td><code>SMALLINT</code></td><td>2字节整数值，支持-32768~32768的数</td></tr><tr><td><code>TINYINT</code></td><td>1字节整数值，支持0~255的数</td></tr></tbody></table><blockquote><p><strong>货币数据类型</strong></p><p>多数DBMS支持一种用来存储货币值的特殊数值数据类型。一般记为<code>MONEY</code>或<code>CURRENCT</code>，这些数据类型有特定取值范围的<code>DECIMAL</code>数据类型，更适合存储货币值。</p></blockquote><h3 id="日期和时间数据类型" tabindex="-1"><a class="header-anchor" href="#日期和时间数据类型" aria-hidden="true">#</a> 日期和时间数据类型</h3><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td><code>DATE</code></td><td>日期值</td></tr><tr><td><code>DATETIME</code>（或<code>TIMESTAMP</code>）</td><td>日期时间值</td></tr><tr><td><code>SMALLDATETIME</code></td><td>日期时间值，精确到分（无秒或毫秒）</td></tr><tr><td><code>TIME</code></td><td>时间值</td></tr></tbody></table><h3 id="二进制数据类型" tabindex="-1"><a class="header-anchor" href="#二进制数据类型" aria-hidden="true">#</a> 二进制数据类型</h3><p>二进制数据类型可包含任何数据，甚至可包含二进制信息，如图像、多媒体、字处理文档等。</p><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td><code>BINARY</code></td><td>定长二进制数据（最大长度从255 B到8000 B，有赖于具体的实现）</td></tr><tr><td><code>LOGN RAW</code></td><td>变长二进制数据，最长2GB</td></tr><tr><td>RAW</td><td>定长二进制数据，最大255B</td></tr><tr><td><code>VARBINARY</code></td><td>变长二进制数据</td></tr></tbody></table><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: czl624824554@163.com">chenzilin</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog-site/assets/app.06e41ebd.js" defer></script>
  </body>
</html>
